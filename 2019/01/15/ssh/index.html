<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>ssh | crowsongのblog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="hibernateidea 下 hibernate 的创建 idea 创建 bean.hbm.xml 与 hibernate.cfg.xml 在配置 javaBean.hbm.xml 时，column 如果不配，自动根据属性名 name 填写，如果表的 列名 与 代码的属性名 相同，则不需要配置 column hibernate 中对象的状态 瞬时状态：没有 id，没有在 session 缓存中">
<meta name="keywords" content="java,spring,SSH">
<meta property="og:type" content="article">
<meta property="og:title" content="ssh">
<meta property="og:url" content="http://yoursite.com/2019/01/15/ssh/index.html">
<meta property="og:site_name" content="crowsongのblog">
<meta property="og:description" content="hibernateidea 下 hibernate 的创建 idea 创建 bean.hbm.xml 与 hibernate.cfg.xml 在配置 javaBean.hbm.xml 时，column 如果不配，自动根据属性名 name 填写，如果表的 列名 与 代码的属性名 相同，则不需要配置 column hibernate 中对象的状态 瞬时状态：没有 id，没有在 session 缓存中">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="d:/hexo/source/_posts/ssh/捕获.PNG">
<meta property="og:image" content="d:/hexo/source/_posts/ssh/struts2jar.PNG">
<meta property="og:image" content="d:/hexo/source/_posts/ssh/spring配置.png">
<meta property="og:updated_time" content="2019-05-14T11:28:42.715Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ssh">
<meta name="twitter:description" content="hibernateidea 下 hibernate 的创建 idea 创建 bean.hbm.xml 与 hibernate.cfg.xml 在配置 javaBean.hbm.xml 时，column 如果不配，自动根据属性名 name 填写，如果表的 列名 与 代码的属性名 相同，则不需要配置 column hibernate 中对象的状态 瞬时状态：没有 id，没有在 session 缓存中">
<meta name="twitter:image" content="d:/hexo/source/_posts/ssh/捕获.PNG">
  
    <link rel="alternate" href="/atom.xml" title="crowsongのblog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">crowsongのblog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-ssh" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/15/ssh/" class="article-date">
  <time datetime="2019-01-15T02:40:21.000Z" itemprop="datePublished">2019-01-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSH/">SSH</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ssh
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="hibernate"><a href="#hibernate" class="headerlink" title="hibernate"></a>hibernate</h4><p><a href="https://blog.csdn.net/fighting_sxw/article/details/80566295" target="_blank" rel="noopener">idea 下 hibernate 的创建</a></p>
<p><a href="https://www.linuxidc.com/Linux/2016-09/135624.htm" target="_blank" rel="noopener">idea 创建 bean.hbm.xml 与 hibernate.cfg.xml</a></p>
<p>在配置 javaBean.hbm.xml 时，column 如果不配，自动根据属性名 name 填写，如果表的 列名 与 代码的属性名 相同，则不需要配置 column</p>
<h5 id="hibernate-中对象的状态"><a href="#hibernate-中对象的状态" class="headerlink" title="hibernate 中对象的状态"></a>hibernate 中对象的状态</h5><ol>
<li>瞬时状态：没有 id，没有在 session 缓存中</li>
<li>持久化状态：有 id ，在 session 缓存中</li>
<li>游离/托管状态：有 id ，没有在 session  缓存中</li>
</ol>
<p>save 方法实质是将 瞬时状态的转变成持久化状态</p>
<p>执行 save 方法时，为了将对象转换成持久化状态必须生成 id 值，如果需要的话会执行 insert 语句来生成：主键自增的情况下</p>
<p>如果是 increament ：查询数据库 id 最大值作为主键的情况下会执行查询数据库 id 最大值的 sql 语句</p>
<p>持久化对象的特点：持久化对象的任何变化都会自动同步到数据库</p>
<p>save/update ：将瞬时/游离状态的对象转变为持久化状态（saveOrupdate 方法可以通用）</p>
<p>delete/close：将持久化状态的对象转变为 瞬时/游离状态</p>
<p>get 直接获得一个持久化状态的对象</p>
<p>hibernate 的作用：把希望持久化到数据库的数据，其对应的对象状态变为持久化</p>
<a id="more"></a>
<h5 id="hibernate-事务"><a href="#hibernate-事务" class="headerlink" title="hibernate 事务"></a>hibernate 事务</h5><p><code>sf.getCurrentSession();//获得当前与 Thread 绑定的 session（多次获得都是同一个 session）</code></p>
<p>需要配置 hibernate.cfg.xml 中的<code>&lt;property name=&quot;hibernate.connection.isolation&quot;&gt;4&lt;/property&gt;</code>才能使用</p>
<p>通过 getCurrentSession() 获得的 session 事务提交后，session 会自动关闭，不需要 close</p>
<p>HQL 语句只有对象名和属性名，没有数据库的任何表名和属性名</p>
<h5 id="hibernate-一级缓存-缓存快照"><a href="#hibernate-一级缓存-缓存快照" class="headerlink" title="hibernate 一级缓存+缓存快照"></a>hibernate 一级缓存+缓存快照</h5><p>作用：可以提高查询效率，可以减少不必要的修改语句的发送</p>
<p>程序–&gt;get 方式查询时–&gt;hibernate 先从缓存中查看是否有相同 id 的对象，如果有直接返回缓存中；如果没有，发送 sql 语句查询数据库–&gt;数据库返回一个 ResultSet–&gt;hibernate 将 resultSet 中的数据组装成两个对象，并存入 session 缓存中，另一个存入缓存快照–&gt;session 中的对象返回程序–&gt;</p>
<p>如果程序修改了对象进行事务提交–&gt;hibernate 会比对缓存中对象和快照，如果有变化会同步到数据库，如果没变化则不修改</p>
<p>所以在执行多条 相同 get 语句查询相同 id 对象时，只会执行一次查询数据库操作，其余的都在缓存中查找。</p>
<h5 id="inverse（反转）-属性："><a href="#inverse（反转）-属性：" class="headerlink" title="inverse（反转） 属性："></a>inverse（反转） 属性：</h5><p>inverse 属性为空时，默认 false 表示维护当前外键关系，true 表示放弃维护</p>
<p>一对多时，一的一方放弃维护</p>
<p>当遇到多对多关系时，必须有一方放弃维护关系，具体放弃方由业务决定</p>
<p>例：员工入职时需要指定职位，此时由员工维护，职位放弃维护</p>
<h5 id="cascade-（级联操作）属性："><a href="#cascade-（级联操作）属性：" class="headerlink" title="cascade （级联操作）属性："></a>cascade （级联操作）属性：</h5><p>save-update:级联保存更新</p>
<p>delete：级联删除</p>
<p>all：级联保存更新+删除</p>
<p>用来简化代码书写，一般只用 save-update，delete 在多对多表中容易多张表关联删除</p>
<h5 id="主键生成策略"><a href="#主键生成策略" class="headerlink" title="主键生成策略"></a>主键生成策略</h5><p>increment：代理主键，适合于所有数据库，由hibernate维护主键自增，和底层数据库无关，但是不适合于2个或以上hibernate进程。</p>
<p>identity：代理主键，适合于Mysql或ms sql server等支持自增的dbms，主键值不由hibernate维护。</p>
<p>sequence：代理主键，适合于oracle等支持序列的dbms，主键值不由hibernate维护，由序列产生。（Oracle中很常用）</p>
<p>native：代理主键，根据底层数据库的具体特性选择适合的主键生成策略，如果是mysql或sqlserver，选择identity，如果是oracle，选择sequence。（推荐）</p>
<p>hilo：代理主键，hibernate把特定表的字段作为hign值，生成主键值</p>
<p>uuid.hex：代理主键，hibernate采用uuid 128位算法生成基于字符串的主键值</p>
<p>assigned：适合于应用程序维护的自然主键。</p>
<p>用 varchar 作为主键生成策略的7种里只有2种：uuid 与 assigned–手动指定， 企业中数据字典表的维护，直接修改表维护，一般不会根据项去修改表，所以此时主键生成策略是用不到的。</p>
<p><a href="https://www.cnblogs.com/flyoung2008/articles/2165759.html" target="_blank" rel="noopener">Hibernate主键生成策略</a></p>
<p><a href="https://www.cnblogs.com/kakafra/archive/2012/09/16/2687569.html" target="_blank" rel="noopener">Hibernate各种主键生成策略与配置详解</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;id name=&quot;dict_id&quot;  &gt;</span><br><span class="line">   &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;</span><br><span class="line">&lt;/id&gt;</span><br></pre></td></tr></table></figure>
<h5 id="一对多，多对一"><a href="#一对多，多对一" class="headerlink" title="一对多，多对一"></a>一对多，多对一</h5><p>ORM</p>
<p>O:对象    一的一方使用集合，多的一方直接引用一的一方</p>
<p>R:关系型数据库    多的一方使用外键引用一的一方的主键</p>
<p>M:映射文件    </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">一：</span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"外键"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"></span><br><span class="line">多：</span><br><span class="line"><span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">column</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在一张表的外键访问另一张表的主键时，外键字段的值是多个的，也就是多条记录，是多的一方。另一张表因为是主键，所以只有一个，是一的一方。</p>
<p>在配置时，如果多的一方需要通过数据字典访问一的一方，那么多的一方需要配置多对一关系。如果一的一方不需要通过数据字典反过来访问多的一方，则在数据字典实体中不需要配置一对多关系</p>
<h5 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h5><p>ORM</p>
<p>O:对象    两方都使用集合</p>
<p>R:关系型数据库    使用中间表，至少两列，作为外键引用两张表的主键</p>
<p>M:映射文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">多：</span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">table</span>=<span class="string">"中间表名"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"外键,别人引用我的"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">""</span> <span class="attr">column</span>=<span class="string">"我引用别人的"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Hibernate 中</p>
<p>detached 分离的</p>
<p>Criteria 标准，规则</p>
<p>detachedCriteria</p>
<p>restriction 限制</p>
<p>格式 serviceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建语句，给与返回类型</span></span><br><span class="line">DetachedCriteria detachedCriteria = DetachedCriteria.forClass(Staff.class);</span><br><span class="line"><span class="comment">//给予限定条件</span></span><br><span class="line">detachedCriteria.add(Restrictions.eq(<span class="string">"deltag"</span>,<span class="number">0</span>));</span><br></pre></td></tr></table></figure>
<h5 id="Hibernate-Restrictions"><a href="#Hibernate-Restrictions" class="headerlink" title="Hibernate Restrictions"></a>Hibernate Restrictions</h5><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Restrictions.eq</td>
<td>＝</td>
</tr>
<tr>
<td>Restrictions.allEq</td>
<td>利用Map来进行多个等于的限制</td>
</tr>
<tr>
<td>Restrictions.gt</td>
<td>＞</td>
</tr>
<tr>
<td>Restrictions.ge</td>
<td>＞＝</td>
</tr>
<tr>
<td>Restrictions.lt</td>
<td>＜</td>
</tr>
<tr>
<td>Restrictions.le</td>
<td>＜＝</td>
</tr>
<tr>
<td>Restrictions.between</td>
<td>BETWEEN</td>
</tr>
<tr>
<td>Restrictions.like</td>
<td>LIKE</td>
</tr>
<tr>
<td>Restrictions.in</td>
<td>in</td>
</tr>
<tr>
<td>Restrictions.and</td>
<td>and</td>
</tr>
<tr>
<td>Restrictions.or</td>
<td>or</td>
</tr>
<tr>
<td>Restrictions.sqlRestriction</td>
<td>用SQL限定查询</td>
</tr>
</tbody>
</table>
<p> 全称：</p>
<p><strong>QBC常用限定方法</strong></p>
<p>Restrictions.eq –&gt; equal,等于.</p>
<p>Restrictions.allEq –&gt; 参数为Map对象,使用key/value进行多个等于的比对,相当于多个Restrictions.eq的效果</p>
<p>Restrictions.gt –&gt; great-than &gt; 大于</p>
<p>Restrictions.ge –&gt; great-equal &gt;= 大于等于</p>
<p>Restrictions.lt –&gt; less-than, &lt; 小于</p>
<p>Restrictions.le –&gt; less-equal &lt;= 小于等于</p>
<p>Restrictions.between –&gt; 对应SQL的between子句</p>
<p>Restrictions.like –&gt; 对应SQL的LIKE子句</p>
<p>Restrictions.in –&gt; 对应SQL的in子句</p>
<p>Restrictions.and –&gt; and 关系</p>
<p>Restrictions.or –&gt; or 关系</p>
<p>Restrictions.isNull –&gt; 判断属性是否为空,为空则返回true</p>
<p>Restrictions.isNotNull –&gt; 与isNull相反</p>
<p>Restrictions.sqlRestriction –&gt; SQL限定的查询</p>
<p>Order.asc –&gt; 根据传入的字段进行升序排序</p>
<p>Order.desc –&gt; 根据传入的字段进行降序排序</p>
<p>MatchMode.EXACT –&gt; 字符串精确匹配.相当于”like ‘value’”</p>
<p>MatchMode.ANYWHERE –&gt; 字符串在中间匹配.相当于”like ‘%value%’”</p>
<p>MatchMode.START –&gt; 字符串在最前面的位置.相当于”like ‘value%’”</p>
<p>MatchMode.END –&gt; 字符串在最后面的位置.相当于”like ‘%value’”</p>
<p><a href="https://xuganggogo.iteye.com/blog/440078" target="_blank" rel="noopener">Restrictions 用法</a></p>
<h5 id="懒加载"><a href="#懒加载" class="headerlink" title="懒加载"></a>懒加载</h5><p>get 方法，立即加载，执行方法时执行 sql 语句查询结果</p>
<p>load 方法（默认）：在执行时，不发送任何 sql 语句，返回一个对象，使用该对象时才执行查询（懒加载/延迟加载：只是获得没有使用，使用时查询）。可以在 class 元素上配置 lazy 属性控制，默认 lazy=true 实行懒加载，改为 lazy=false 则不执行懒加载。</p>
<p>load 方法使用了代理 ，使 返回的代理对象能够在使用属性时，根据关联 session 查询数据库，加载数据</p>
<p>打印对象中 $ 符号，指代理对象，可以对方法进行改造或增强</p>
<p>关联级别查询</p>
<p>为了提高效率，fetch 选择 select ，lazy 取 true，全部为默认值</p>
<p>no-session-Exception:因为在代理对象被放到页面时，session 一定关闭了，所以需要扩大 session 作用域</p>
<hr>
<h4 id="Struts2"><a href="#Struts2" class="headerlink" title="Struts2"></a>Struts2</h4><p>用来代替 servlet 层进行处理访问服务器的请求的</p>
<h5 id="servlet-线程安全问题"><a href="#servlet-线程安全问题" class="headerlink" title="servlet 线程安全问题"></a>servlet 线程安全问题</h5><p><a href="https://blog.csdn.net/qq_24145735/article/details/52433096" target="_blank" rel="noopener">servlet 的线程不安全问题</a></p>
<p>servlet 只创建一个对象实例，所以只有一个成员变量（它随着对象的创建而创建），多个用户访问 servlet 只修改一个成员变量，可能会有覆盖问题，会导致线程安全问题</p>
<p>struts2 的 Action 在每次请求时都会创建一个新的 Action 实例对象，所以是线程安全的，可以定义成员变量接收参数</p>
<p>struts1 基于 servlet，servlet 有线程不安全问题</p>
<p>struts2 基于 filter 过滤器</p>
<p>struts2 的核心是拦截器（inteceptor）</p>
<p>拦截器封装了很多功能，且用了可插拔设计，使用了 aop 思想（将纵向重复代码，横向抽取），在调用 action 前先调用 inteceptor</p>
<p><a href="https://www.jianshu.com/p/d8ba3a768447" target="_blank" rel="noopener">struts2 Result 详解</a></p>
<hr>
<p>i18n:国际化：配置多国语言，根据浏览器发送的不同编码，读取不同语言版本的配置文件，动态将配置文件信息显示到页面。解决 post 提交乱码问题</p>
<p>reload 热加载</p>
<p>redeploy 热部署</p>
<p>动态配置方法调用：通配符方式</p>
<p>POJO：不用继承任何父类，也不需要实现任何接口的类</p>
<p><a href="https://blog.csdn.net/it_manman/article/details/79699455" target="_blank" rel="noopener">tomcat 没有 artifact 的配置</a></p>
<p><a href="https://www.cnblogs.com/deng-cc/p/6416332.html" target="_blank" rel="noopener">idea 项目配置简介</a></p>
<hr>
<h5 id="struts-的数据中心：ActionContext（它是一个-Map）"><a href="#struts-的数据中心：ActionContext（它是一个-Map）" class="headerlink" title="struts 的数据中心：ActionContext（它是一个 Map）"></a>struts 的数据中心：ActionContext（它是一个 Map）</h5><p>用来获得原生 ServletAPI</p>
<p>生命周期：每次请求都会创建一个对应的 ActionContext 对象，请求处理完，ActionContext 销毁。ActionContext 中只是获得 各个域 及对象（request,response,sevletContext 等）的引用，不会影响其生命周期。</p>
<p>request 域 与 session 域 application 域，实质就是在 HttpRequest/HttpSession/servletContext 的一块空间中创建了 Map，用 set/getAttribute 来存取值（param 参数存取也是一个 Map）</p>
<p>ActionContext 与 request 的生命周期相同，所以官方推荐使用 ActionContext 代替 requestScope</p>
<p>struts2 的 ActionContext  加强了 request 的方法，使其在取值时仍旧使用原有的方法。调用的就是 request.getAttribute() 方法， 先去 request 域中找，也去 ActionContext 的域中找。存值用 ActionContext ；</p>
<p>struts 结果集：转发、重定向、转发 Action、重定向 Action</p>
<h5 id="Struts-mvc"><a href="#Struts-mvc" class="headerlink" title="Struts mvc"></a>Struts mvc</h5><p>c:Filter</p>
<p>m:Action</p>
<p>v:Result</p>
<h5 id="获得参数的方式"><a href="#获得参数的方式" class="headerlink" title="获得参数的方式"></a>获得参数的方式</h5><p>有 struts2 的话，表单参数会自动封装到栈顶对象</p>
<ol>
<li>属性驱动 - Action 准备与参数建同名属性，创建参数的 set 方法</li>
<li>对象驱动 - Action 准备与参数建同名属性（页面属性名需要改为 Obj.property），将属性封装到对象中，模型对象驱动栈顶对象（ModelDriven\&lt;栈顶对象>）不能生成 get set 方法</li>
<li>模型驱动 - 实现 ModelDriven 接口 - 实现 getModel 方法，返回需要封装参数的对象（可以直接返回对象，页面属性名跟 servlet 一样，但返回多对象麻烦）</li>
<li>复杂参数封装 <ul>
<li>List 集合：提交键：list        list[index]</li>
<li>Map 集合： 提交键：map[‘key’]</li>
</ul>
</li>
</ol>
<p>为什么使用模型驱动：</p>
<p>当我们使用params拦截器完成数据自动封装的时候，如果要封装的是JavaBean对象，那么在web表单中就必须的name写上javaBean.属性名….</p>
<p>这样的话，web层和Action层就耦合了…因为在web层必须要知道封装的JavaBean对象是什么才能够实现自动封装！</p>
<p>而模型驱动就解决了这个问题！即时不知道Action层的JavaBean对象是什么，也能够完成数据自动封装！</p>
<p><a href="https://blog.csdn.net/maoyuanming0806/article/details/76704596" target="_blank" rel="noopener">struts2 模型驱动理解</a></p>
<p>实现方式：参数拦截器</p>
<p><code>&lt;interceptor name=&quot;params&quot;class=&quot;com.opensymphony.xwork2.interceptor.ParametersInterceptor&quot;/&gt;</code></p>
<p><a href="https://blog.csdn.net/hon_3y/article/details/70877090" target="_blank" rel="noopener">数据自动封装获得参数</a></p>
<p><a href="https://blog.csdn.net/csuliky/article/details/4226917" target="_blank" rel="noopener">struts2 获得参数</a></p>
<hr>
<h5 id="OGNL-与-Struts2"><a href="#OGNL-与-Struts2" class="headerlink" title="OGNL 与 Struts2"></a>OGNL 与 Struts2</h5><p>OGNL：Object-Graph Navigation Language 对象视图导航语言</p>
<p>OGNL 与 struts2 没关系，是一种独立的表达式语言</p>
<p>el 表达式 ${user.addr.name} 等表达式是 对象视图导航</p>
<p>OGNL 本质跟 el 表达式差不多，但添加了许多功能</p>
<p>OGNL 包含在 struts2 的包中，包名为：”ognl-var.jar”</p>
<p>el表达式的取值范围为 11 大内置对象</p>
<p>OGNL 的取值范围是 OGNLContext：OGNL上下文对象</p>
<p>OGNLContext 内部有两部分组成：root/context</p>
<p>root 中可以放置任何对象</p>
<p>context 中需要存放 map （键值对）</p>
<p>OGNL 可以调用静态方法（不需要对象）</p>
<p>OGNL 表达式要运行先要准备一个 OGNLContext，struts2 准备了一个 ValueStack（值栈） 作为 OGNLCOntext，</p>
<p>OGNLContext 由两部分构成，一部分叫 Root，放置的是一个栈，一部分叫 Context，将 AcitonContext （数据中心）放入</p>
<p>默认情况下 Root（栈）中放置当前访问的 Action 对象</p>
<p>ActionContext 下放的是：request、response、servletContext、requestScope、sessionScope、applicationScope、parameters、attrs…</p>
<p>list 集合制作栈结构容器</p>
<p>push ：压栈：list.add(0,obj);</p>
<p>list 的索引一定是连续的，如果 list 中添加了 0 索引的值，之后的索引会往后延续</p>
<p>pop：弹栈：list.remove(0);</p>
<p>list remove 方法会移除 0 索引的值，并返回该值，后续的索引会往前移</p>
<p>在栈中取属性时，从栈顶开始，找不到就往下找，直到找到停止。</p>
<p>struts2 中参数接受由 OGNL 引擎完成</p>
<p>属性驱动:从 Root 中拿到 name 属性值，并赋值为 tom — name = tom</p>
<p>对象驱动：从栈顶对象中获得 user 属性，再获得 user 属性的 name 属性，赋值为 tom – user.name = tom</p>
<p>模型驱动：从栈顶对象获得 name 属性，并赋值为 tom — name = tom</p>
<p>因为实现模型驱动需要在 赋值前，将接受的参数压入栈顶，不然无法赋值。</p>
<p>但是默认的 拦截器中，赋值的 param 拦截器运行比 action（压栈）早，所以需要自己去实现 Preparable 接口,实现 prepare 方法，把 action 的压栈代码放到 prepare 方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//获得栈值</span><br><span class="line">ValueStack vs = ActionContext.getContext().getValueStack();</span><br><span class="line">//将 User u 压入栈顶</span><br><span class="line">vs.push(u);</span><br></pre></td></tr></table></figure>
<p>或者可以使用 ModelDriven<user> 接口，实现 public User getModel( return u){} 方法，将压栈方法放入其中，实现原理跟 prepare 一致。</user></p>
<hr>
<h5 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h5><p>生命周期：随项目启动而创建，随项目关闭而销毁，类似 filter</p>
<p>idea 查看源码没有注释的原因及解决方法</p>
<p>idea 直接查看源码是 jar 包反编译 .class 文件得到的，注释不会存在于 .class 文件中， 若需要注释则需要导入 .java 的 jar 包，即 -sources.jar 后缀的文件 。</p>
<p><a href="https://blog.csdn.net/qq_40163099/article/details/81263804" target="_blank" rel="noopener">idea 查看 jar 包没有注释</a></p>
<p>拦截器放行则调用 invoke() 方法，如果不想放行直接返回一个页面则 return 一个字符串，赋值给 resultCode(源码中)，使其不再递归调用 invoke()</p>
<p>就不会调用后续拦截器及 action </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">window</span>.parent != <span class="built_in">window</span>)&#123;<span class="comment">//如果页面再框架中</span></span><br><span class="line">          <span class="comment">//让框架页面跳转到登陆页面</span></span><br><span class="line">          <span class="built_in">window</span>.parent.location.href=<span class="string">"$&#123;pageContext.request.contextPath&#125;/login.jsp"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>解决登录页跳转在框架中的方法 </p>
<hr>
<h5 id="Struts2-xml-配置"><a href="#Struts2-xml-配置" class="headerlink" title="Struts2 xml 配置"></a>Struts2 xml 配置</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE struts PUBLIC</span></span><br><span class="line"><span class="meta">    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"</span></span><br><span class="line"><span class="meta">    "http://struts.apache.org/dtds/struts-2.3.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 配置常量 --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 字符集 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.i18n.encoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 开发模式 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.devMode"</span> <span class="attr">value</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 主题 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.ui.theme"</span> <span class="attr">value</span>=<span class="string">"simple"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 扩展名 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.action.extension"</span> <span class="attr">value</span>=<span class="string">"action"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 通用package --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"customer"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></span><br><span class="line">       </span><br><span class="line"><span class="comment">&lt;!--如果struts2 没有被 spring 代理时，需要在 class 中填写完整类名，method 表示访问 action 中的某个方法，name 是一个返回的名称，与项目名路径拼接成一个访问路径。如果被 spring 代理则填写 spring 配置的 action 名即可--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"findById"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.crm.action.CustomerAction"</span> <span class="attr">method</span>=<span class="string">"findCustomerById"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/info.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>action 中 name 是访问时根据 项目名+name+.action 来拼接访问网址用的，class 是该类的完整类名（由 spring 管理 struts2 时，spring 的 application.xml 文件中会配置该 action，所以那时只需要填写 spring 中配置的 action 的 name 属性即可），method 表示该 action 中要访问哪个方法，result 表示访问该方法后，return 了 success 后的跳转页面</p>
<p>如果配置扩展名的 constant，则在网站访问时，必须是 actionName.action 等有后缀的方式，具体后缀名根据配置改变</p>
<hr>
<h4 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h4><p>spring 管理项目中所有对象</p>
<p>Spring 框架是容器性质的，容器中有什么对象就有什么功能，是一站式框架</p>
<p><a href="https://www.cnblogs.com/shindo/p/7272646.html" target="_blank" rel="noopener">创建 idea web项目</a></p>
<p>创建 spring xml 配置文件：</p>
<p>先创建一个项目，然后配置好spring依赖，随后新建xml文件就可以看到Spring Config选项了，选择它，然后输入配置文件名（applicationContext），建好了spring的配置文件。</p>
<p>spring 导包：4个核心包，2个日志包，1个 web 整合包</p>
<h5 id="控制反转"><a href="#控制反转" class="headerlink" title="控制反转"></a>控制反转</h5><p>（Inversion of Control，缩写为IOC）</p>
<p>反转控制就是反转对象的创建方式，由我们自己创建反转成 spring（容器）创建</p>
<h5 id="依赖注入"><a href="#依赖注入" class="headerlink" title="依赖注入"></a>依赖注入</h5><p>（Dependency Injection，简称DI）</p>
<p>依赖注入就是实现 IOC 思想的方式</p>
<p>注入方式：</p>
<ol>
<li>set 方法注入</li>
<li>构造方法注入</li>
<li>字段注入</li>
</ol>
<p>注入类型：</p>
<ol>
<li>值注入：8 大数据类型都是值注入，可以将在一个 name 创建时给与值 “三爷”</li>
<li>引用类型注入：将依赖对象注入，将 dao 注入到 service 或将 service 注入到 action</li>
</ol>
<p>BeanFactory</p>
<p>spring 的原始接口，针对其接口的功能比较单一，BeanFactory 接口实现类的容器在获得对象时才会创建</p>
<p>AppicationContext</p>
<p>Spring 比较末端的接口，每次启动时创建容器中所有配置对象，并提供更多功能</p>
<p>从类路径加载配置文件:classPathXmlApplicationContext</p>
<p>web 开发用 AppicationContext，手机等资源匮乏的地方用 BeanFactory</p>
<hr>
<h5 id="spring-配置"><a href="#spring-配置" class="headerlink" title="spring 配置"></a>spring 配置</h5><p>Bean 元素</p>
<p>name 属性 与 id 属性都是用来给被管理对象起名，在获得对象时根据这个名字来获得。</p>
<p>name 属性是为了解决 id 属性不能使用特殊字符规则而创造出来的</p>
<p>class 属性用来获得 对象完整类名</p>
<p>scope 属性</p>
<ol>
<li>singleton（单例模式）：单例模式的对象在 Spring 容器中只会存在一个实例</li>
<li>prototyte（多例原型）：多例原型的对象每次在获得时才会创建，每次创建都是新的对象</li>
<li>request：web 环境下，对象与 request 生命周期一致（不用）</li>
<li>session：web 环境下，对象与 session 生命周期一致（不用）</li>
</ol>
<p>一般情况都是用默认配置 singleton，但与 struts2 整合时，给 action 的 bean 必须声明多例（struts 每个请求都会创建一个新的 action）</p>
<p>创建方式</p>
<ol>
<li><p>空参构造创建（对象创建必须通过构造函数）(推荐)</p>
<p><code>&lt;bean name=&quot;user&quot; class=&quot;com.xxx.bean.User&quot;&gt;&lt;/bean&gt;</code></p>
</li>
<li><p>静态工厂</p>
</li>
<li><p>实例工厂</p>
</li>
</ol>
<p>分模块配置</p>
<p>将一个配置文件导入另一个配置文件中</p>
<p><code>&lt;import resource=&quot;cn.xxx.applicationContext.xml&quot;/&gt;</code></p>
<p><a href="https://blog.csdn.net/sinat_34596644/article/details/53080026" target="_blank" rel="noopener">spring 定义 bean 的三种方式</a></p>
<p>属性注入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"cn.xxx.bean.User"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--set 注入 ，为 User 对象 name，age 属性 注入值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"zhangsan"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"11"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--引用类型注入用 ref ，对象注入,将下方配置的 Car 注入到 User--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"car"</span> <span class="attr">ref</span>=<span class="string">"car"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 将 Car 配置到容器,注入到其他对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"car"</span> <span class="attr">class</span>=<span class="string">"cn.xxx.bean.Car"</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"迈巴赫"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cloor"</span> <span class="attr">value</span>=<span class="string">"黑"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>构造函数注入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index 属性指定构造函数参数的索引地址， type 指定参数类型 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"cn.xxx.bean.User"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"lisi"</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">type</span>=<span class="string">"java.lang.Integer"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--引用类型注入用 ref ，对象注入,将上方配置的 Car 注入到 User--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"car"</span> <span class="attr">ref</span>=<span class="string">"car"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>p名称注入</p>
<p>先导入<code>xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</code></p>
<p><code>&lt;bean name=&quot;user3&quot; class=&quot;cn.xxx.bean.User&quot; p:name=&quot;jack&quot; p:age=&quot;18&quot; p:car-ref=&quot;car&quot;&gt;&lt;/bean&gt;</code></p>
<p>本质还是走 set 构造，用来简化 property 配置方式。</p>
<p>spel 注入：spring Expression Language， spring 表达式语言</p>
<p>复杂类型注入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"cb"</span> <span class="attr">class</span>=<span class="string">"cn.itheima.bean.CollectionBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"arr"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--多元素 array 注入--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>tom<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>jim<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"car"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!--map 类型注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql///hibernate"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"carName"</span> <span class="attr">value-ref</span>=<span class="string">"car"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key-ref</span>=<span class="string">"user"</span> <span class="attr">value-ref</span>=<span class="string">"user"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--property 类型注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prop"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"driverClass"</span>&gt;</span>com.jdbc.com.Driver<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"userName"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"password"</span>&gt;</span>1234<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<p>tomcat  jar 包导入，并且应用到 mudeule</p>
<p>先在右上角点击 Edit Configurations，选择  tomcat ，设置名称，点击 Application server 右侧的 configure，选择左侧的 tomcat 版本（记住这个版本号），点击第一个 + 号，选择 tomcat 下的 lib 目录。点击确定。</p>
<p>然后 ctrl + alt + shift + s 打开 project structure ，选择 module，选中当前 module。点击右侧 + 号，选择 libraries，选择刚才配置的 tomcat 版本号。完成</p>
<hr>
<h5 id="Spring-使用注解替代-xml"><a href="#Spring-使用注解替代-xml" class="headerlink" title="Spring 使用注解替代 xml"></a>Spring 使用注解替代 xml</h5><ol>
<li>为主配置导入新的命名空间（约束），导包（4+2+spring-aop)</li>
<li>开启注解代理配置文件</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--指定扫描 该 package 下所有类中的注解，扫描时会连带其包下的子孙包一起扫描--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.xxx.domain"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p>在类中使用注解</p>
<p>@Component(“user”)</p>
<p>@Service(“user”);（service 层）</p>
<p>@Controller(“user”);（web 层，action/servlet）</p>
<p>@Repository(“user”);（dao 层，仓库）</p>
<p>四个注解功能相同，下面 3 个更容易区分功能层级（可读性高）</p>
</li>
</ol>
<p>修改对象作用范围：</p>
<p>@Scope(ScopeName=”prototype”)</p>
<p>设置为多例，默认为单例(singleton)</p>
<p>值类型注入：</p>
<p>@Value(“name”);</p>
<p>可以加在 成员变量上，通过反射的 Field 赋值，破坏封装性</p>
<p>也可以加载 set 方法上，通过 set 方法赋值</p>
<p><code>@Autowired//自动装配</code></p>
<p>如果由多个一致类型的对象，则无法选择具体哪一个</p>
<p><code>@Autowired</code></p>
<p><code>@Qualifier(&quot;car2&quot;)</code></p>
<p>有多个一致类型的对象，使用这两条注释，用来选择具体哪个对象</p>
<p>或者直接使用<code>@Resource(name=&quot;car2&quot;)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostConstruct</span><span class="comment">//对象创建（被构造）后调用-就是 init-method</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"初始化"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="meta">@PreDestroy</span><span class="comment">//对象销毁前调用-destory-method</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destory</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"销毁"</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>ApplicationContext 没有 close 方法，需要用它的子类 ClassPathXmlApplicationContext</p>
<hr>
<h5 id="spring-aop"><a href="#spring-aop" class="headerlink" title="spring aop:"></a>spring aop:</h5><p>Spring 能为我们管理的对象动态生成代理对象，</p>
<p>自己创建代理对象需要创建方法 :</p>
<p>Proxy.newProxyInstance(classLoader,Interface[] arr,InvocationHandler handler);</p>
<p>spring 实现 aop 原理（Spring 混合 2 种代理）</p>
<ol>
<li>动态代理：被代理对象必须实现接口，才能产生代理对象，如果没有接口就不能使用动态代理技术（有接口时优先使用）</li>
<li>cglib 代理：第三方代理技术，可以对任何类生成代理，代理的原理是对目标对象进行继承代理，如果目标对象被 final 修饰，则无法被 cglib 代理（没有接口时使用）</li>
</ol>
<h5 id="aop-名词"><a href="#aop-名词" class="headerlink" title="aop 名词"></a>aop 名词</h5><p>Joinpoint（连接点）：目标对象中所有可以增强的方法</p>
<p>Pointcut（切入点）：目标对象中已经增强的方法</p>
<p>Advice（通知/增强）：增强的代码（需要添加在 被增强方法 前后的代码）</p>
<p>Target（目标对象）：被代理对象</p>
<p>Weaving（织入）：将通知应用到切入点这个过程</p>
<p>Proxy（代理）：将通知织入到目标对象后形成代理</p>
<p>aspect（切面）：切入点+通知</p>
<p>aop 导包：</p>
<p>4个基本包+</p>
<p>spring-aop-5.0.8.RELEASE.jar</p>
<p>com.springsource.org.aopalliance-1.0.0.jar</p>
<p>com.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar</p>
<p>spring-aspects-5.0.8.RELEASE.jar</p>
<p>动态代理</p>
<ol>
<li>通过动态代理可以实现 aop 思想</li>
<li>对目标对象中方法增强</li>
</ol>
<details><br>    <summary>spring aop 配置 xml</summary><br>    <p><br>        <pre><br><!-- 准备工作: 导入aop(约束)命名空间 --><br><!-- 1.配置目标对象 --><br>    <bean name="userService" class="cn.itcast.service.UserServiceImpl"></bean><br><!-- 2.配置通知对象 --><br>    <bean name="myAdvice" class="cn.itcast.d_springaop.MyAdvice"></bean><br><!-- 3.配置将通知织入目标对象 --><br>    <a href="aop:config" target="_blank" rel="noopener">aop:config</a><br>        <!-- 配置切入点 
            public void cn.itcast.service.UserServiceImpl.save() 
            void cn.itcast.service.UserServiceImpl.save()
            * cn.itcast.service.UserServiceImpl.save()
            * cn.itcast.service.UserServiceImpl.*()
            * cn.itcast.service.*ServiceImpl.*(..)
            * cn.itcast.service..*ServiceImpl.*(..)
        --><br>        &lt;aop:pointcut expression=”execution(<em> cn.itcast.service.</em>ServiceImpl.*(..))” id=”pc”/&gt;<br>        &lt;aop:aspect ref=”myAdvice” &gt;<br>            <!-- 指定名为before方法作为前置通知 --><br>            &lt;aop:before method=”before” pointcut-ref=”pc” /&gt;<br>            <!-- 后置 --><br>            &lt;aop:after-returning method=”afterReturning” pointcut-ref=”pc” /&gt;<br>            <!-- 环绕通知 --><br>            &lt;aop:around method=”around” pointcut-ref=”pc” /&gt;<br>            <!-- 异常拦截通知 --><br>            &lt;aop:after-throwing method=”afterException” pointcut-ref=”pc”/&gt;<br>            <!-- 后置 --><br>            &lt;aop:after method=”after” pointcut-ref=”pc”/&gt;<br>        &lt;/aop:aspect&gt;<br>    &lt;/aop:config&gt;<br><br>        </pre><br>    </p><br></details>




<hr>
<h5 id="spring-jdbc-配置"><a href="#spring-jdbc-配置" class="headerlink" title="spring jdbc 配置"></a>spring jdbc 配置</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">"http://www.springframework.org/schema/util"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util  http://www.springframework.org/schema/util/spring-util-4.0.xsd http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context-4.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:db.properties"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--将 dataSource 放入 spring 容器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.jdbcUrl&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.user&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--将 jdbcTemplate 放入 spring 容器--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;bean name="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate"&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;/bean&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--将 UserDao 放入 spring容器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userDao"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.jdbctemplate.UserDaoImpl"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;property name="jt" ref="jdbcTemplate"&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--直接把 jdbc 连接池注入给 dao --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="Spring-事务操作"><a href="#Spring-事务操作" class="headerlink" title="Spring 事务操作"></a>Spring 事务操作</h5><p>事务操作对象：PlatFormTransactionManager 接口</p>
<p>最核心的就是 TransactionManager 对象，给各个数据库操作对象提供不同的接口</p>
<p>Spring 事务属性</p>
<ul>
<li><p>事务的隔离级别：1-读已提交，2-读未提交，4-可重复度，8-串行化</p>
</li>
<li><p>是否只读：true（只读）/false（可操作）</p>
</li>
<li><p>事务传播行为：业务（Service）方法之间互相（平行）调用时，事务该如何处理</p>
<p>默认行为：PROPAGATION_REQUIRED 支持当前事务，如果不存在则新建一个（基本只用这个）</p>
</li>
</ul>
<p>Spring 事务管理方式</p>
<ul>
<li><p>编码式（了解）</p>
</li>
<li><p>xml 配置（aop）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--事务核心管理器配置，封装了所有事务操作，依赖于连接池--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置事务通知--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"transfer"</span> <span class="attr">isolation</span>=<span class="string">"READ_COMMITTED"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置织入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"txPc"</span> <span class="attr">expression</span>=<span class="string">"execution(* cn.itcast.service.impl.*ServiceImpl.*(..))"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"txPc"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>注解配置（aop）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--事务核心管理器配置，封装了所有事务操作，依赖于连接池--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--开启注解事务--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>类上的注解配置：</p>
<p><code>@Transactional(isolation = Isolation.REPEATABLE_READ,propagation = Propagation.REQUIRED,readOnly = false)</code></p>
<p>如果想要一个类中所有方法都使用该注解配置，则将其放在类名上，如果其中有个别方法需要额外配置，则另填加注释再该方法上。</p>
</li>
</ul>
<hr>
<h4 id="SSH-框架整合"><a href="#SSH-框架整合" class="headerlink" title="SSH 框架整合"></a>SSH 框架整合</h4><p>WEB 层：struts2 + jsp</p>
<p>Service 层：javaBean</p>
<p>JavaBeans 是Java中一种特殊的类，可以将多个对象封装到一个对象（bean）中。 特点<strong>是</strong>可序列化，提供无参构造器，提供getter方法和setter方法访问对象的属性。</p>
<p>Dao 层：hibernate</p>
<p>struts2 与 spring 整合：将 Action 对象交给 spring 容器来创建</p>
<p>hibernate 与 spring 整合：将 sessionFactory 交给 spring 负责维护，并将 session 的维护以及 aop 事务都交给 spirng</p>
<hr>
<h5 id="导包："><a href="#导包：" class="headerlink" title="导包："></a>导包：</h5><ul>
<li>hibernate 包</li>
</ul>
<p>\hibernate-release-5.0.7.Final\hibernate-release-5.0.7.Final\lib\required  下全部包</p>
<p><img src="D:\hexo\source\_posts\ssh\捕获.PNG" alt="hibernate jar包"></p>
<p>\hibernate-release-5.0.7.Final\hibernate-release-5.0.7.Final\lib\jpa\ <code>hibernate-entitymanager-5.0.7.Final.jar</code></p>
<p><code>mysql-connector-java-5.1.7-bin.jar</code></p>
<ul>
<li>struts2:包</li>
</ul>
<p>\struts-2.3.24-all\struts-2.3.24\apps\struts2-blank\WEB-INF\lib 下全部包</p>
<p><img src="D:\hexo\source\_posts\ssh\struts2jar.PNG" alt="struts2jar"></p>
<p>\struts-2.3.24-all\struts-2.3.24\lib\ <code>struts2-spring-plugin-2.3.24.jar</code></p>
<p>struts2-spring-plugin-2.3.24.jar 这个包会让 struts2 在项目启动时会去寻找 spring 容器，如果找不到就会报错，单独使用 struts2 项目时不能导入</p>
<ul>
<li>spring 包</li>
</ul>
<p>4+2(核心包):</p>
<p>\spring-framework-5.0.8.RELEASE-dist\spring-framework-5.0.8.RELEASE\libs 下4个核心包</p>
<p>beans、comtext、core、expression</p>
<p>\spring-framework-3.0.2.RELEASE-dependencies\org.apache.log4j\com.springsource.org.apache.log4j\1.2.15 下的</p>
<p><code>com.springsource.org.apache.log4j-1.2.15.jar</code></p>
<p>\spring-framework-3.0.2.RELEASE-dependencies\org.apache.commons\com.springsource.org.apache.commons.dbcp\1.2.2.osgi 下的</p>
<p><code>com.springsource.org.apache.commons.dbcp-1.2.2.osgi.jar</code></p>
<p>整合 web 的包(spring-web)：</p>
<p>\spring-framework-5.0.8.RELEASE-dist\spring-framework-5.0.8.RELEASE\libs 下的</p>
<p><code>spring-web-5.0.8.RELEASE.jar</code></p>
<p>整合 aop （4个）(spring-aop|spring-aspect|aopalliance|aopweaving)</p>
<p>\spring-framework-5.0.8.RELEASE-dist\spring-framework-5.0.8.RELEASE\libs 下的</p>
<p><code>spring-aop-5.0.8.RELEASE.jar</code></p>
<p><code>spring-aspects-5.0.8.RELEASE.jar</code></p>
<p>\spring-framework-3.0.2.RELEASE-dependencies\org.aopalliance\com.springsource.org.aopalliance\1.0.0 下的</p>
<p><code>com.springsource.org.aopalliance-1.0.0.jar</code></p>
<p>\spring-framework-3.0.2.RELEASE-dependencies\org.aspectj\com.springsource.org.aspectj.weaver\1.6.8.RELEASE</p>
<p><code>com.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar</code></p>
<ul>
<li>整合 hibernate 事务的（4个）（spring-jdbc|spring-tx|c3p0|spring-orm）</li>
</ul>
<p>\spring-framework-5.0.8.RELEASE-dist\spring-framework-5.0.8.RELEASE\libs 下的</p>
<p><code>spring-jdbc-5.0.8.RELEASE.jar</code></p>
<p><code>spring-orm-5.0.8.RELEASE.jar</code></p>
<p><code>spring-tx-5.0.8.RELEASE.jar</code></p>
<p>\spring-framework-3.0.2.RELEASE-dependencies\com.mchange.c3p0\com.springsource.com.mchange.v2.c3p0\0.9.1.2 下的</p>
<p><code>com.springsource.com.mchange.v2.c3p0-0.9.1.2.jar</code></p>
<ul>
<li>junit4 测试包</li>
</ul>
<p>\SSH\spring-framework-5.0.8.RELEASE-dist\spring-framework-5.0.8.RELEASE\libs 下的</p>
<p><code>spring-test-5.0.8.RELEASE.jar</code></p>
<hr>
<h5 id="单独配置-spring"><a href="#单独配置-spring" class="headerlink" title="单独配置 spring"></a>单独配置 spring</h5><p>web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--让 spring 随 web 启动而创建的监听器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置 spring 配置文件位置参数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="单独配置-struts2"><a href="#单独配置-struts2" class="headerlink" title="单独配置 struts2"></a>单独配置 struts2</h5><p>struts.xml（sturts2 主配置文件）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE struts PUBLIC</span></span><br><span class="line"><span class="meta">        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"</span></span><br><span class="line"><span class="meta">        "http://struts.apache.org/dtds/struts-2.3.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.objectFactory"</span> <span class="attr">value</span>=<span class="string">"spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"crm"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"UserAction_*"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.web.action.UserAction"</span> <span class="attr">method</span>=<span class="string">"&#123;1&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>将 action 的创建（obj 工厂 ）交给 spring 管理<br>struts.objectFactory = spring</p>
<p>spring 负责装配 Action 的依赖属性（将 action 中需要创建的 servie 交给 spring 管理）<br>struts.objectFactory.spring.autoWire = name</p>
<p>method={1} 代表该方法代表 name 中第几个通配符（*）</p>
<p>struts2 核心过滤器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--struts2 核心过滤器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="整合方案1（不推荐）"><a href="#整合方案1（不推荐）" class="headerlink" title="整合方案1（不推荐）"></a>整合方案1（不推荐）</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--方案1：class 属性仍然配置 action 完整类名，--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--struts2仍然修饰 action ，由 spring 负责组装 Action 中依赖关系--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"crm"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"UserAction_*"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.web.action.UserAction"</span> <span class="attr">method</span>=<span class="string">"&#123;1&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="整合方案2：spring-负责创建-action-及组装"><a href="#整合方案2：spring-负责创建-action-及组装" class="headerlink" title="整合方案2：spring 负责创建 action 及组装"></a>整合方案2：spring 负责创建 action 及组装</h5><p>applicationContext.xml</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Action 作用对象一定是多例的--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userAction"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.web.action.UserAction"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"us"</span> <span class="attr">ref</span>=<span class="string">"userService"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.service.impl.UserServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>struts.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"crm"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"UserAction_*"</span> <span class="attr">class</span>=<span class="string">"userAction"</span> <span class="attr">method</span>=<span class="string">"&#123;1&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="单独配置-hibernate"><a href="#单独配置-hibernate" class="headerlink" title="单独配置 hibernate"></a>单独配置 hibernate</h5><p>导入orm元数据 与 实体类</p>
<p>配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE hibernate-configuration PUBLIC</span></span><br><span class="line"><span class="meta">	"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span></span><br><span class="line"><span class="meta">	"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		 <span class="comment">&lt;!-- 数据库驱动 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		 <span class="comment">&lt;!-- 数据库url --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql:///crm_32<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		 <span class="comment">&lt;!-- 数据库连接用户名 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.username"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		 <span class="comment">&lt;!-- 数据库连接密码 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.password"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 数据库方言--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 将hibernate生成的sql语句打印到控制台 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 将hibernate生成的sql语句格式化(语法缩进) --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- auto schema export  自动导出表结构. 自动建表--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 引入orm元数据</span></span><br><span class="line"><span class="comment">			路径书写: 填写src下的路径</span></span><br><span class="line"><span class="comment">		 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"cn/itcast/domain/Customer.hbm.xml"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"cn/itcast/domain/LinkMan.hbm.xml"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"cn/itcast/domain/User.hbm.xml"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="spring-整合-hibernate"><a href="#spring-整合-hibernate" class="headerlink" title="spring 整合 hibernate"></a>spring 整合 hibernate</h5><p>方案一：spring 中配置 sessionFactory（不重要）</p>
<p>applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--将 SessionFactory 配置到 spring 容器中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--加载配置方案1：仍然使用外部 hibernate.cfg.xml 配置信息--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"hibernate.cfg.xml"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>方案二：将 hibernate 配置文件放到 spring 的配置文件中（使用该方法）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--加载配置方案2：在 spring 配置中放置 hibernate 配置信息--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置 hibernate 基本信息--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernateProperties"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--必选配置--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql:///crm_32<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.connection.username"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.connection.password"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!--可选配置--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--引入元数据--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mappingDirectoryLocations"</span> <span class="attr">value</span>=<span class="string">"cn/itcast/domain"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="spring-整合-c3p0-连接池"><a href="#spring-整合-c3p0-连接池" class="headerlink" title="spring 整合 c3p0 连接池"></a>spring 整合 c3p0 连接池</h5><ul>
<li><p>配置 db.properties ，放入用户密码等键值对</p>
</li>
<li><p>引入连接池到 spring </p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启 session 连接池--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:db.properties"</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--将 dataSource 放入 spring 容器--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.jdbcUrl&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.user&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</code></p>
<p>将连接池注入到 sessionFactory,hibernate 会通过连接池获得连接</p>
<hr>
<h5 id="spring-整合-hibernate-操作数据库"><a href="#spring-整合-hibernate-操作数据库" class="headerlink" title="spring 整合 hibernate 操作数据库"></a>spring 整合 hibernate 操作数据库</h5><p>dao 类创建继承 HibernateDaoSupport</p>
<p>模板操作 ：execute / findByCriteria</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//hibernateDaoSupport 使用 需要为 dao 注入 sessionFactory</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">extends</span> <span class="title">HibernateDaoSupport</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//匿名内部类引用外部变量必须设置为 final</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getByUserCode</span><span class="params">(<span class="keyword">final</span> String usercode)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//HQL</span></span><br><span class="line"><span class="comment">//        return getHibernateTemplate().execute(new HibernateCallback&lt;User&gt;() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public User doInHibernate(Session session) throws HibernateException &#123;</span></span><br><span class="line"><span class="comment">//                String hql = " from User where user_code=? ";</span></span><br><span class="line"><span class="comment">//                Query query = session.createQuery(hql);</span></span><br><span class="line"><span class="comment">//                query.setParameter(0,usercode);</span></span><br><span class="line"><span class="comment">//                User user = (User) query.uniqueResult();</span></span><br><span class="line"><span class="comment">//                return user;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Criteria</span></span><br><span class="line">        DetachedCriteria dc = DetachedCriteria.forClass(User.class);</span><br><span class="line"></span><br><span class="line">        dc.add(Restrictions.eq(<span class="string">"user_code"</span>,usercode));</span><br><span class="line">        List&lt;User&gt; list = (List&lt;User&gt;) getHibernateTemplate().findByCriteria(dc);</span><br><span class="line">        <span class="keyword">if</span>(list!=<span class="keyword">null</span> &amp;&amp; list.size()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> list.get(<span class="number">0</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>applicationContext.xml 注入 sessioFactory</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userDao"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.dao.impl.UserDaoImpl"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--模板操作需要注入 sessionFactory--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="spring-AOP-事务"><a href="#spring-AOP-事务" class="headerlink" title="spring AOP 事务"></a>spring AOP 事务</h5><p>配置核心事务管理器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--核心事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>xml 配置 aop 事务</p>
<ul>
<li><p>配置通知</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置通知--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"save*"</span> <span class="attr">isolation</span>=<span class="string">"REPEATABLE_READ"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"persist*"</span> <span class="attr">isolation</span>=<span class="string">"REPEATABLE_READ"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"update*"</span> <span class="attr">isolation</span>=<span class="string">"REPEATABLE_READ"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"modify*"</span> <span class="attr">isolation</span>=<span class="string">"REPEATABLE_READ"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"delete*"</span> <span class="attr">isolation</span>=<span class="string">"REPEATABLE_READ"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"remove*"</span> <span class="attr">isolation</span>=<span class="string">"REPEATABLE_READ"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"get*"</span> <span class="attr">isolation</span>=<span class="string">"REPEATABLE_READ"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"find*"</span> <span class="attr">isolation</span>=<span class="string">"REPEATABLE_READ"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>配置织入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置将通知织入目标对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置切点--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"txPc"</span> <span class="attr">expression</span>=<span class="string">"execution(* cn.itcast.service.impl.*ServiceImpl.*(..))"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置切面--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"txPc"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="注解事务"><a href="#注解事务" class="headerlink" title="注解事务"></a>注解事务</h5><p>开启注解事务</p>
<p><code>&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;</code></p>
<p>在类或方法上添加注释（类上加的话，类中方法全部使用该注释，特例的方法上可以单独加注释覆盖类注释）</p>
<p><code>@Transactional(isolation= Isolation.REPEATABLE_READ,propagation = Propagation.REQUIRED,readOnly = true)</code></p>
<hr>
<h5 id="扩大-session-作用域"><a href="#扩大-session-作用域" class="headerlink" title="扩大 session 作用域"></a>扩大 session 作用域</h5><p>避免使用懒加载时出现 no-session 问题（session 在到达 jsp 前已经关闭），需要扩大 session 作用域</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--扩大 session 作用范围</span></span><br><span class="line"><span class="comment">    该 filter 一定要在 struts 的 filter 之前</span></span><br><span class="line"><span class="comment">    struts 过滤器没有 放行代码，所有过滤器都要在 struts 前--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--在视图 jsp 中 session 还是打开的--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>openSessionInView<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.orm.hibernate5.support.OpenSessionInViewFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>openSessionInView<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="maven-的使用"><a href="#maven-的使用" class="headerlink" title="maven 的使用"></a>maven 的使用</h4><h5 id="maven-的用途"><a href="#maven-的用途" class="headerlink" title="maven 的用途"></a>maven 的用途</h5><ol>
<li>maven 能统一管理依赖（管理项目的 jar 包），从而节省项目空间</li>
<li>能一键构建项目：mvn tomcat:run 能不依靠 tomcat 直接运行项目</li>
<li>可以跨平台（因为是 java 开发的，专门用于 java 项目的，而 java 是跨平台的）</li>
<li>用于大型开发项目，可以提高开发效率（将一个项目分成多个小项目，分模块开发）（按业务分或按层分：dao、web、service）</li>
</ol>
<h5 id="maven-仓库"><a href="#maven-仓库" class="headerlink" title="maven 仓库"></a>maven 仓库</h5><p>它有三种仓库：</p>
<ol>
<li>本地仓库：自己维护，需要修改 C:\Users\用户名.m2 下 setting.xml 文件的 属性<code>&lt;localRepository&gt;C:\repository&lt;/localRepository&gt;</code></li>
<li>远程仓库：公司维护，本地仓库没有 jar 包时去这里下载</li>
<li>中央仓库：maven 团队维护，2亿 jar 包，如果远程仓库没有会去这里下载，也可以直接下载到本地仓库。</li>
</ol>
<h5 id="maven-项目目录结构"><a href="#maven-项目目录结构" class="headerlink" title="maven 项目目录结构"></a>maven 项目目录结构</h5><p>maven-helloworld</p>
<ul>
<li>src<ul>
<li>main：主目录<ul>
<li>java：放置 java 代码</li>
<li>resource：放置 xml 以及 properties 等原来 src 目录下的配置文件</li>
<li>webapp</li>
</ul>
</li>
<li>test：测试目录<ul>
<li>java：java 代码，junit 测试调用</li>
<li>resources：junit 测试用到的配置文件，如果内部没有测试文件，默认从 main 中找</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="meven-常用命令"><a href="#meven-常用命令" class="headerlink" title="meven 常用命令"></a>meven 常用命令</h5><ul>
<li>mvn tomcat:run  一键启动运行</li>
<li>mvn clean 删除编译的文件（target 文件夹）</li>
<li>mvn compile 编译主目录文件</li>
<li>mvn test 编译并运行 测试目录的文件（test 目录）</li>
<li>mvn package 打包项目成 war 包（包名，后缀名都是在 pom.xml 中配置的）</li>
<li>mvn install 将项目发布到配置的本地仓库</li>
</ul>
<h5 id="三种生命周期"><a href="#三种生命周期" class="headerlink" title="三种生命周期"></a>三种生命周期</h5><p>clean 生命周期：clean</p>
<p>Default 生命周期：Compile、test、package、install、deploy（按顺序）</p>
<p>Set 生命周期：site（用来生成项目的站点文档，用来描述项目）</p>
<p>同一生命周期的顺序靠后的命令执行时会同时顺序执行在前的命令</p>
<p>不同生命周期的命令可以同时执行（mvn clean package，这样会执行 clean 后执行 package）</p>
<hr>
<h5 id="Intellj-IDEA-创建-maven-项目"><a href="#Intellj-IDEA-创建-maven-项目" class="headerlink" title="Intellj IDEA 创建 maven 项目"></a>Intellj IDEA 创建 maven 项目</h5><ol>
<li>创建 project - maven project（作为 parent）勾选 create from archetype 选项，选择下方的 maven-archetype-site，这样该项目就可以成为父工程，聚合子模块，让其他模块继承。<ol>
<li>创建继承父工程的前台管理模块 portal_manager，在 parent 的工程上右键 new module，同样勾选  create from archetype 选项，选择下方的 maven-archetype-site，下一步。为了只是让改模块管理版本，而不是成为 parent 子模块，需要在上方 Add As module to 的右侧，点击 ··· 按钮，选择 none，取消继承 parent。取名（名字中间的分隔符建议使用 _ ，如果使用 - 会被 idea 自动忽略，需要下一步手动添加），下一步选择路径，去掉 parent 路径，让其与 parent 在同一路径下。完成。</li>
</ol>
</li>
<li>创建继承 manager 的子模块 dao，勾选  create from archetype 选项，选择  maven-archetype-quickstart，下一步，取名，下一步目录指定为 manager 路径下，完成，</li>
<li>service 同上，给 service 添加一个 dao 模块的 dependency 依赖</li>
<li>创建继承 manager 的 web 模块，勾选 create from archetype 选项，选择下方的 org.apache.maven.archetype-maven-archetype-webapp（有2个 web 模块，注意别选错），其余同上。完成后手动创建 src/main/java 目录，将 java 文件夹变为 source，给其添加 service 依赖。</li>
<li>后台创建同以上 2-5 步 back_manager，然后需要让前台的 service 依赖后台 dao，前台的 web 依赖后台 service</li>
</ol>
<p>右键创建类没有 servlet 的话，在 maven 的 pom.xml 下 dependencies 中配置 servlet 即可，如果还是没有就刷新 maven 的 pom 文件</p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_32588349/article/details/51461182" target="_blank" rel="noopener">idea 配置 maven 项目入门</a></p>
<p><a href="https://blog.csdn.net/xiaoke815/article/details/72810976" target="_blank" rel="noopener">创建 maven 项目无 src 目录</a></p>
<p><a href="https://www.cnblogs.com/wangmingshun/p/6383576.html" target="_blank" rel="noopener">IntelliJ IDEA创建maven多模块项目</a></p>
<p><a href="http://gavin-chen.iteye.com/blog/240424" target="_blank" rel="noopener"><em>maven dependency 机制</em></a></p>
<p><a href="https://www.bilibili.com/video/av21735428/?p=18" target="_blank" rel="noopener">b站 idea 教程视频</a></p>
</blockquote>
<h5 id="jar-包依赖范围："><a href="#jar-包依赖范围：" class="headerlink" title="jar 包依赖范围："></a>jar 包依赖范围：</h5><p>Compile：编译时需要，测试时需要，运行时需要(struts2-core)</p>
<p>Provided：编译时需要，测试时需要，打包时不需要（jsp-api.jar，servlet-api.jar）</p>
<p>Runtime：编译时不需要，运行时不需要，打包时需要（数据库驱动包）</p>
<p>Test：编译时不需要，测试时需要，打包时不需要（junit.jar）</p>
<h5 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--约束的版本信息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--坐标 GAV--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.itcast<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssh<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--打包方式 jar war pom--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>ssh Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- FIXME change it to the project's website --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.example.com<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--jar 包依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.struts<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>struts2-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--内部配置了多个插件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="依赖版本冲突解决"><a href="#依赖版本冲突解决" class="headerlink" title="依赖版本冲突解决"></a>依赖版本冲突解决</h5><p>调节原则：</p>
<ul>
<li>路径近者优先原则</li>
<li>第一申明者优先原则</li>
</ul>
<p>排除原则</p>
<p>版本锁定</p>
<hr>
<h5 id="idea-使用-maven-分模块开发"><a href="#idea-使用-maven-分模块开发" class="headerlink" title="idea 使用 maven 分模块开发"></a>idea 使用 maven 分模块开发</h5><p>[<a href="https://blog.csdn.net/u012129558/article/details/78423511" target="_blank" rel="noopener">使用IDEA创建maven项目整合SSH(多模块聚合)</a></p>
<p><a href="https://blog.csdn.net/fighting_sxw/article/details/80850971" target="_blank" rel="noopener">使用IDEA创建maven项目</a></p>
<p>依赖传递在 scope 为 test 时会无法传递到下一个模块，可以在下一个模块中再添加一个同样 scope 为 test 的依赖</p>
<p>聚合运行：在 parent 项目上 tomcat：run，最终打的 package 中是 web 中的 jar 包，所以不会出现 jar 包冲突</p>
<p>pom 文件中配置的路径为 网页访问路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- maven内置 的tomcat6插件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 可以灵活配置工程路径 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">path</span>&gt;</span>/ssh<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 可以灵活配置端口号 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">port</span>&gt;</span>8080<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>分模块测试 junit</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.crm.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.crm.entity.Customer;</span><br><span class="line"><span class="keyword">import</span> cn.itcast.crm.service.CustomerService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@ContextConfiguration(locations=&#123;"classpath:applicationContext-service.xml","classpath:applicationContext-dao.xml"&#125;)</span></span><br><span class="line"><span class="comment">//表示 从jar包中获得 xml 时需要加上 classpath*，applicationContext-* 表示任何后缀都获取（service/dao....）</span></span><br><span class="line"><span class="meta">@ContextConfiguration</span>(locations=&#123;<span class="string">"classpath*:applicationContext-*.xml"</span>&#125;)</span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerServiceImplTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CustomerService customerService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Customer customer = customerService.findById(<span class="number">1l</span>);</span><br><span class="line">        System.out.println(customer.getCustName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="私服-nexus"><a href="#私服-nexus" class="headerlink" title="私服 nexus"></a>私服 nexus</h5><p>登录 用户名：admin</p>
<p>密码：admin123</p>
<p>Virtual：虚拟仓库</p>
<ul>
<li>central M1 shadow ：影子仓库，没实际用处</li>
</ul>
<p>Proxy：代理仓库</p>
<ul>
<li><p>Apache Snapshots （阿帕奇 快照）：作为一个非正式仓库，代理跳转到 阿帕奇 的一个仓库</p>
</li>
<li><p>Central ：代理跳转到 阿帕奇中央仓库</p>
</li>
</ul>
<p>Hosted：宿主仓库，本地仓库</p>
<ul>
<li>3rd party：其他公司自己开发的工程</li>
<li>Releases：自己做的工程是 Release 会提交到此处</li>
<li>Snapshots：自己做的工程属性 是 Snapshots 时，提交到私服时会自动放到此处</li>
</ul>
<p>group</p>
<ul>
<li>public Respositories：不知道是 release 还是 snaphots 则从此处下载工程</li>
</ul>
<hr>
<h4 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h4><h5 id="Q-Field-‘id’-doesn’t-have-a-default-value-错误提示。"><a href="#Q-Field-‘id’-doesn’t-have-a-default-value-错误提示。" class="headerlink" title="Q:Field ‘id’ doesn’t have a default value 错误提示。"></a>Q:Field ‘id’ doesn’t have a default value 错误提示。</h5><p>A:删除原本的数据库，让其自动创建</p>
<h5 id="Q-java-lang-NoClassDefFoundError-Could-not-initialize-class-com-itheima-utils-HibernateUtils"><a href="#Q-java-lang-NoClassDefFoundError-Could-not-initialize-class-com-itheima-utils-HibernateUtils" class="headerlink" title="Q:java.lang.NoClassDefFoundError: Could not initialize class com.itheima.utils.HibernateUtils"></a>Q:java.lang.NoClassDefFoundError: Could not initialize class com.itheima.utils.HibernateUtils</h5><p>A：参考：<a href="https://www.cnblogs.com/chenjfblog/p/7904024.html" target="_blank" rel="noopener">https://www.cnblogs.com/chenjfblog/p/7904024.html</a></p>
<p>配置了 xml 与 注释，删掉其中一个就好了</p>
<h5 id="Q-修改-jsp-内容后页面标签属性-href-不变化"><a href="#Q-修改-jsp-内容后页面标签属性-href-不变化" class="headerlink" title="Q:修改 jsp 内容后页面标签属性 href 不变化"></a>Q:修改 jsp 内容后页面标签属性 href 不变化</h5><p>因为删除了原先的 menu.htm 页面，没有将标签的 src 属性 变成新的 menu.jsp，修改 href 无效，重启 idea ，再发布网页会显示 网页 menu 部分 404 异常： HTTP Status 404 – Not Found</p>
<h5 id="Q-org-hibernate-HibernateException-No-CurrentSessionContext-configured"><a href="#Q-org-hibernate-HibernateException-No-CurrentSessionContext-configured" class="headerlink" title="Q:org.hibernate.HibernateException: No CurrentSessionContext configured!"></a>Q:org.hibernate.HibernateException: No CurrentSessionContext configured!</h5><p>解决的办法就是根据需求在hibernate.cfg.xml文件中加上 </p>
<p><code>&lt;property name=&quot;hibernate.current_session_context_class&quot;&gt;thread&lt;/property&gt;</code></p>
<p>或</p>
<p><code>&lt;property name=&quot;hibernate.current_session_context_class&quot;&gt;jta&lt;/property&gt;</code></p>
<p>添加第一种报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.hibernate.HibernateException: createCriteria is not valid without active transaction</span><br></pre></td></tr></table></figure>
<p>将 thread 改为 jta</p>
<p>参考：<a href="https://blog.csdn.net/yinjian520/article/details/8666695" target="_blank" rel="noopener">https://blog.csdn.net/yinjian520/article/details/8666695</a></p>
<p>修改后出现问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.hibernate.HibernateException: No TransactionManagerLookup specified</span><br></pre></td></tr></table></figure>
<p>将 service 中的 openSession  改为 getCurrentSession</p>
<p>参考：<a href="https://blog.csdn.net/xlgen157387/article/details/39801967" target="_blank" rel="noopener">https://blog.csdn.net/xlgen157387/article/details/39801967</a></p>
<blockquote>
<p>出错原因：需要把两个方法中用的sesiion一致，因为混用了所以报错，</p>
<p>要么同时写session=HibernateSessionFactory.getSession()来获取session</p>
<p>然后hibernate中配置为</p>
<property name="current_session_context_class">jta</property>

<p>要不就是用session=HibernateSessionFactory.getSessionFactory().getCurrentSession();来获取session</p>
<p>然后hibernate中的配置为：<property name="current_session_context_class">thread</property></p>
<p>出处：<a href="https://blog.csdn.net/tarataotao/article/details/9376693" target="_blank" rel="noopener">https://blog.csdn.net/tarataotao/article/details/9376693</a></p>
</blockquote>
<h5 id="Q-配置文件报错：不允许有匹配-“-xX-mM-lL-”-的处理指令目标。"><a href="#Q-配置文件报错：不允许有匹配-“-xX-mM-lL-”-的处理指令目标。" class="headerlink" title="Q:配置文件报错：不允许有匹配 “[xX][mM][lL]” 的处理指令目标。"></a>Q:配置文件报错：不允许有匹配 “[xX][mM][lL]” 的处理指令目标。</h5><p>A:</p>
<p> 规范 XML格式</p>
<p> &lt;?xml version=”1.0” encoding=”UTF-8”?&gt;  必须是XML文件的第一个元素且前面不能空格。</p>
<p>参考：<a href="https://blog.csdn.net/niubaofeng2011/article/details/39007693" target="_blank" rel="noopener">https://blog.csdn.net/niubaofeng2011/article/details/39007693</a></p>
<h5 id="Q-IDEA-DTD-文件引入报错"><a href="#Q-IDEA-DTD-文件引入报错" class="headerlink" title="Q:IDEA  DTD 文件引入报错"></a>Q:IDEA  DTD 文件引入报错</h5><p>错误信息：URI is not registered (Settings | Languages &amp; Frameworks | Schemas and DTD</p>
<p><a href="https://blog.csdn.net/weixin_39220472/article/details/80031704" target="_blank" rel="noopener">IDEA解决URI is not registered (Settings | Languages &amp; Frameworks | Schemas and DTD</a></p>
<hr>
<h5 id="Q-idea-的-tomcat-不能正常关闭"><a href="#Q-idea-的-tomcat-不能正常关闭" class="headerlink" title="Q:idea 的 tomcat 不能正常关闭"></a>Q:idea 的 tomcat 不能正常关闭</h5><p>问题报错：</p>
<p>org.apache.catalina.loader.WebappClassLoaderBase.clearReferencesThreads The web application [ROOT] appears to have started a thread named [pool-2-thread-1] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:  sun.misc.Unsafe.park</p>
<p>A:</p>
<p><a href="https://stackoverflow.com/questions/28105803/tomcat8-memory-leak" target="_blank" rel="noopener">https://stackoverflow.com/questions/28105803/tomcat8-memory-leak</a></p>
<hr>
<h5 id="Q-Error-2-17-java-程序包org-junit不存在"><a href="#Q-Error-2-17-java-程序包org-junit不存在" class="headerlink" title="Q:Error:(2, 17) java: 程序包org.junit不存在"></a>Q:Error:(2, 17) java: 程序包org.junit不存在</h5><p>A:导入 com.springsource.org.junit-4.7.0.jar 的 junit jar 包即可</p>
<hr>
<h5 id="Q-bean-重复配置"><a href="#Q-bean-重复配置" class="headerlink" title="Q: bean 重复配置"></a>Q: bean 重复配置</h5><p>org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Bean name ‘user’ is already used in this <beans> element<br>Offending resource: class path resource [applicationContext.xml]</beans></p>
<p>A: 在 Spring 配置文件重复配置相同 name 属性的 bean 会产生错误</p>
<hr>
<h5 id="Q-NullPointerException"><a href="#Q-NullPointerException" class="headerlink" title="Q:NullPointerException"></a>Q:NullPointerException</h5><p>java.lang.NullPointerException at cn.itheima.service.impl.UserServiceImpl.login(UserServiceImpl.java:19) at cn.itheima.web.action.UserAction.login(UserAction.java:16) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at</p>
<p>spring 容器注入，需要由 spring 创建 UserService 对象，自己创建就会为空</p>
<hr>
<h5 id="Q-Spring-Junit4-RunWith-为红色"><a href="#Q-Spring-Junit4-RunWith-为红色" class="headerlink" title="Q:Spring Junit4 @RunWith 为红色"></a>Q:Spring Junit4 @RunWith 为红色</h5><p>A: 在 Module 中 Libraries 中，点击左侧 + 号，选择 java 添加 idea lib 包下的 junit 添加到该项目</p>
<hr>
<h5 id="Q-程序包org-junit-runner不存在"><a href="#Q-程序包org-junit-runner不存在" class="headerlink" title="Q:程序包org.junit.runner不存在"></a>Q:程序包org.junit.runner不存在</h5><p>idea 使用 springJunit4 出现问题 : 程序包org.junit.runner不存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)</span><br></pre></td></tr></table></figure>
<p><a href="https://blog.csdn.net/he99774/article/details/78254262" target="_blank" rel="noopener">程序包org.junit.runner不存在</a></p>
<p>File -&gt; Project Struct… -&gt; Libraies -&gt; 点击绿色的加号 -&gt; Java -&gt; 找到 IDEA 安装路径下的 Lib 中的junit-4.12 -&gt; 确定就行了，点击OK就出去了</p>
<hr>
<h5 id="Q-Spring-整合的-Junit4-错误"><a href="#Q-Spring-整合的-Junit4-错误" class="headerlink" title="Q:Spring 整合的 Junit4 错误"></a>Q:Spring 整合的 Junit4 错误</h5><p>java.lang.NoSuchMethodError: org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runLeaf</p>
<p>(Lorg/junit/runners/model/Statement;Lorg/junit/runner/Description;Lorg/junit/runner/notification/RunNotifier;)</p>
<p>A:Junit4 包冲突了，删除自己导入 lib 下的 com.springsource.org.junit-4.7.0.jar，在红色的 @Test 上选择第一个修复方法</p>
<hr>
<h5 id="Q-unnamed-spring-confirguration-files-found"><a href="#Q-unnamed-spring-confirguration-files-found" class="headerlink" title="Q:unnamed spring confirguration files found"></a>Q:unnamed spring confirguration files found</h5><p><img src="D:\hexo\source\_posts\ssh\spring配置.png" alt="spring配置"></p>
<p>A:shift + ctrl + alt + s 进入 Project Structure–&gt; modules–&gt;选择未配置 Spring Configuration 的项目–&gt;（如果没有 相应的 spring ,点击左侧 + 号,选择 spring）–&gt;选中需要添加的spring 项目 –&gt; 点击右侧 + 号–&gt; 选择需要的 Spring Application Context xml  文件，点击确认</p>
<p>Facets 表示这个module有什么特征，比如 Web，Spring和Hibernate等； </p>
<p>Artifact：项目产生物，主要有jar, war, maven插件</p>
<p><a href="https://blog.csdn.net/qq_35624642/article/details/51980916" target="_blank" rel="noopener">idea facet 及 artifact 理解</a></p>
<hr>
<h5 id="Q-Spring-配置-jdbc-c3p0-异常"><a href="#Q-Spring-配置-jdbc-c3p0-异常" class="headerlink" title="Q: Spring 配置 jdbc c3p0 异常"></a>Q: Spring 配置 jdbc c3p0 异常</h5><p>org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is java.sql.SQLException: Connections could not be acquired from the underlying database!</p>
<p>A: class 与 url 填反了</p>
<p>参考：以上问题可能有以下原因造成：</p>
<p>1，驱动配置有误：driver=com.mysql.jdbc.Driver<br>2，数据库连接地址有误：url=jdbc:mysql://localhost:3306/test?3useUnicode=true&amp;characterEncoding=utf8<br>3，密码或帐号有误：username=root， password=root</p>
<p>4，数据库未启动或无权访问</p>
<p>5，项目未引入对应的驱动jar包mysql-connector-java-5.1.6-bin.jar</p>
<p>6,mysql root没有远程访问的权限，需要增加权限，增加权限的步骤如下：<br>进入mysql数据库：<br>grant all privileges on <em>.</em> to ‘root‘@’%’ identified by ‘root’ with grant option;<br>flush privileges;</p>
<hr>
<h5 id="A-Spring-异常-Junit4，-NoClassDefFoundError-org-hamcrest-SelfDescribing"><a href="#A-Spring-异常-Junit4，-NoClassDefFoundError-org-hamcrest-SelfDescribing" class="headerlink" title="A:Spring 异常 Junit4，.NoClassDefFoundError: org/hamcrest/SelfDescribing"></a>A:Spring 异常 Junit4，.NoClassDefFoundError: org/hamcrest/SelfDescribing</h5><p>Exception in thread “main” java.lang.NoClassDefFoundError: org/hamcrest/SelfDescribing</p>
<p>Caused by: java.lang.ClassNotFoundException: org.hamcrest.SelfDescribing</p>
<p>A: 删除Mudle 里的 Junit4 lib 包，在 @Test 上 alt+enter 选择添加 junit4，再选择第一个选项即可，idea 会自动添加 junit4 与 hamcrest-core 的 jar 包</p>
<hr>
<h5 id="A-java-lang-IllegalStateException-Failed-to-load-ApplicationContext"><a href="#A-java-lang-IllegalStateException-Failed-to-load-ApplicationContext" class="headerlink" title="A: java.lang.IllegalStateException: Failed to load ApplicationContext"></a>A: java.lang.IllegalStateException: Failed to load ApplicationContext</h5><p>缺少包  com.springsource.org.aopalliance-1.0.0.jar</p>
<p>Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [applicationContext.xml]; nested exception is java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor</p>
<p>Caused by: java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor</p>
<p>Caused by: java.lang.ClassNotFoundException: org.aopalliance.intercept.MethodInterceptor</p>
<h5 id="Q-启动-tomcat-报错-xml-错误"><a href="#Q-启动-tomcat-报错-xml-错误" class="headerlink" title="Q: 启动 tomcat 报错 xml 错误"></a>Q: 启动 tomcat 报错 xml 错误</h5><p>Error creating bean with name ‘transactionManager’ defined in class path resource [applicationContext.xml]: Cannot resolve reference to bean ‘sessionFactory’ while setting bean property ‘sessionFactory’</p>
<p>A：proerties 文件下参数配置错误，导致无法获得 dataSource,后续无法将 dataSource 注入  sessionFactory， 致使 sessionFactory 无法注入到 transactionManager 核心事务管理器，出现错误</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--将 dataSource 放入 spring 容器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.jdbcUrl&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driverClass&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.user&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--将 SessionFactory 配置到 spring 容器中--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line"><span class="comment">&lt;!--核心事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="Q-idea-项目配置文件-class-都为红色"><a href="#Q-idea-项目配置文件-class-都为红色" class="headerlink" title="Q:idea 项目配置文件 class 都为红色"></a>Q:idea 项目配置文件 class 都为红色</h5><p>A: 在 module 中设置项目的 src 路径</p>
<hr>
<h5 id="Q-配置-MAVEN-运行后出现异常"><a href="#Q-配置-MAVEN-运行后出现异常" class="headerlink" title="Q:配置 MAVEN 运行后出现异常"></a>Q:配置 MAVEN 运行后出现异常</h5><p>[ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:run (default-cli): Goal requires a project to execute but there is no POM in this directory (). Please verify you invoked Maven from the correct directory</p>
<p>A: 需要在运行文件的 src 同级目录放有 pom.xml 文件，并且内部有相应的配置信息。</p>
<p>需要在 C:\Users\用户名.m2 中放置 配置 maven 的 settings.xml 而不是在 maven 解压目录的 conf 目录下</p>
<blockquote>
<p>参考：<a href="https://stackoverflow.com/questions/16230666/failed-to-execute-goal-org-codehaus-mojotomcat-maven-plugin1-1deploy-default" target="_blank" rel="noopener">https://stackoverflow.com/questions/16230666/failed-to-execute-goal-org-codehaus-mojotomcat-maven-plugin1-1deploy-default</a></p>
</blockquote>
<hr>
<h5 id="Q-intellj-IDEA-创建-maven-项目无-src-目录问题"><a href="#Q-intellj-IDEA-创建-maven-项目无-src-目录问题" class="headerlink" title="Q:intellj IDEA 创建 maven 项目无 src 目录问题"></a>Q:intellj IDEA 创建 maven 项目无 src 目录问题</h5><p>在自己的 maven 主配置文件 mirrors 下加入 国内阿里云的镜像网站</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span>    </span><br><span class="line">	<span class="comment">&lt;!-- 阿里云仓库 --&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;<span class="name">mirror</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/repositories/central/<span class="tag">&lt;/<span class="name">url</span>&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span>  </span><br><span class="line">     <span class="comment">&lt;!-- 中央仓库 --&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;<span class="name">mirror</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">id</span>&gt;</span>repo<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">name</span>&gt;</span>Human Readable Name for this Mirror.<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo1.maven.org/maven2/<span class="tag">&lt;/<span class="name">url</span>&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考：<a href="https://blog.csdn.net/xiaoke815/article/details/72810976" target="_blank" rel="noopener">https://blog.csdn.net/xiaoke815/article/details/72810976</a></p>
</blockquote>
<hr>
<h5 id="Q-maven-idea-项目-xml-文件中-junit-版本红色"><a href="#Q-maven-idea-项目-xml-文件中-junit-版本红色" class="headerlink" title="Q:maven idea 项目 xml 文件中 junit 版本红色"></a>Q:maven idea 项目 xml 文件中 junit 版本红色</h5><p>A:将版本从 4.11 改成 4.10 或者 4.9</p>
<hr>
<h5 id="Q-maven-jar-包冲突"><a href="#Q-maven-jar-包冲突" class="headerlink" title="Q:maven jar 包冲突"></a>Q:maven jar 包冲突</h5><p>A: maven 的 jsp 与 servlet api 与 tomcat 中的冲突了，在这两个 dependency 中添加 <scope>provided</scope>` 属性，修改其依赖范围</p>
<blockquote>
<p>参考：<a href="https://stackoverflow.com/questions/5735957/maven-loads-servlet-api-twice" target="_blank" rel="noopener">https://stackoverflow.com/questions/5735957/maven-loads-servlet-api-twice</a></p>
</blockquote>
<hr>
<h5 id="Q-intellj-idea-的-jsp-页面无法使用-el-表达式"><a href="#Q-intellj-idea-的-jsp-页面无法使用-el-表达式" class="headerlink" title="Q: intellj idea 的 jsp 页面无法使用 el 表达式"></a>Q: intellj idea 的 jsp 页面无法使用 el 表达式</h5><p>A:在 page 属性中加上 isELIgnored=”false” 属性，使其不要忽略 EL 表达式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">isELIgnored</span>=<span class="string">"false"</span> %&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考：<a href="https://blog.csdn.net/qq_36921440/article/details/83785588" target="_blank" rel="noopener">https://blog.csdn.net/qq_36921440/article/details/83785588</a></p>
</blockquote>
<hr>
<h5 id="Q-intellj-idea-meven-install-错误"><a href="#Q-intellj-idea-meven-install-错误" class="headerlink" title="Q:intellj idea meven install 错误"></a>Q:intellj idea meven install 错误</h5><p>The packaging for this project did not assign a file to the build artifact</p>
<p>A:不要使用自带右侧 maven 的 install ，自己在 EditConfiguration 中配置 install</p>
<hr>
<h5 id="Q-分模块运行-web-错误-404"><a href="#Q-分模块运行-web-错误-404" class="headerlink" title="Q:分模块运行 web 错误 404"></a>Q:分模块运行 web 错误 404</h5><p>HTTP Status 404 - There is no Action mapped for namespace [/] and action name [findById] associated with context path [/ssh].<br>type Status report</p>
<p>message There is no Action mapped for namespace [/] and action name [findById] associated with context path [/ssh].</p>
<p>description The requested resource (There is no Action mapped for namespace [/] and action name [findById] associated with context path [/ssh].) is not available.</p>
<p>A: 经过查看 target 的输出文件夹，发现 applicationContext.xml 与 struts.xml 文件 都不在 class 目录下</p>
<p>于是查看后发现把 ssh-web 模块的 resources 文件夹放到了src 目录下，需要将其放入 src/main 中</p>
<hr>
<h5 id="Q-idea-上传到私服错误"><a href="#Q-idea-上传到私服错误" class="headerlink" title="Q: idea 上传到私服错误"></a>Q: idea 上传到私服错误</h5><p>idea Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy</p>
<p>Return code is: 401, ReasonPhrase: Unauthorized</p>
<p>A:401 是用户密码错误，没有设置好用户名和密码，400是没有访问权限</p>
<p>需要在你的 idea 的配置 xml 下配置 server 属性（C:\Users\用户名\.m2），而不是 maven conf 下的xml</p>
<p><a href="https://huangyunbin.iteye.com/blog/1740426" target="_blank" rel="noopener">https://huangyunbin.iteye.com/blog/1740426</a></p>
<hr>
<h5 id="Q-idea-不会自动从私服下载项目模块-jar-包"><a href="#Q-idea-不会自动从私服下载项目模块-jar-包" class="headerlink" title="Q:idea 不会自动从私服下载项目模块 jar 包"></a>Q:idea 不会自动从私服下载项目模块 jar 包</h5><p>A:因为 idea 默认的 maven 是自带的，需要在 setting Build，Execution，Deployment/Build Tools/Maven 的Maven Home Directory 中选择自己安装的 maven 目录</p>
<p><a href="https://blog.csdn.net/suah01/article/details/64906323" target="_blank" rel="noopener">https://blog.csdn.net/suah01/article/details/64906323</a></p>
<hr>
<h5 id="Q-struts2-从-ajax-接收中文字符串乱码问题"><a href="#Q-struts2-从-ajax-接收中文字符串乱码问题" class="headerlink" title="Q:struts2 从 ajax 接收中文字符串乱码问题"></a>Q:struts2 从 ajax 接收中文字符串乱码问题</h5><p>A:利用 ajax 的 data 项传递参数 <code>data:{&quot;key&quot;,value}</code>，</p>
<p>如果使用 url 后拼接的方式会导致乱码</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/15/ssh/" data-id="cjxsjey4e004jwsu0zvya6vas" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSH/">SSH</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/01/30/ssh-crm/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          ssh_crm
        
      </div>
    </a>
  
  
    <a href="/2018/12/25/Listener_Filter/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Listener_Filter</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Annotation/">Annotation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design-Patterns/">Design Patterns</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis/">MyBatis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSH/">SSH</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringMvc/">SpringMvc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/idea/">idea</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IOC/">IOC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/">MyBatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Singleton-Pattern/">Singleton Pattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/autoAssembly/">autoAssembly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/autoReply/">autoReply</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idea/">idea</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/imooc/">imooc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intelj/">intelj</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interview/">interview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaweb/">javaweb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java基础/">java基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdbc/">jdbc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/myBatis/">myBatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis-Maven/">mybatis Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reflection/">reflection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servlet/">servlet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springmvc/">springmvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ss/">ss</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssm/">ssm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/weChat/">weChat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/依赖/">依赖</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客创建/">博客创建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/反射/">反射</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/注入/">注入</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/注解/">注解</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/IOC/" style="font-size: 10px;">IOC</a> <a href="/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/tags/MyBatis/" style="font-size: 12px;">MyBatis</a> <a href="/tags/SSH/" style="font-size: 12px;">SSH</a> <a href="/tags/Singleton-Pattern/" style="font-size: 10px;">Singleton Pattern</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/autoAssembly/" style="font-size: 10px;">autoAssembly</a> <a href="/tags/autoReply/" style="font-size: 10px;">autoReply</a> <a href="/tags/database/" style="font-size: 10px;">database</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/idea/" style="font-size: 10px;">idea</a> <a href="/tags/imooc/" style="font-size: 12px;">imooc</a> <a href="/tags/intelj/" style="font-size: 10px;">intelj</a> <a href="/tags/interview/" style="font-size: 10px;">interview</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/javaweb/" style="font-size: 10px;">javaweb</a> <a href="/tags/java基础/" style="font-size: 10px;">java基础</a> <a href="/tags/jdbc/" style="font-size: 10px;">jdbc</a> <a href="/tags/linux/" style="font-size: 12px;">linux</a> <a href="/tags/myBatis/" style="font-size: 10px;">myBatis</a> <a href="/tags/mybatis-Maven/" style="font-size: 10px;">mybatis Maven</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/reflection/" style="font-size: 10px;">reflection</a> <a href="/tags/servlet/" style="font-size: 10px;">servlet</a> <a href="/tags/spring/" style="font-size: 16px;">spring</a> <a href="/tags/springmvc/" style="font-size: 10px;">springmvc</a> <a href="/tags/ss/" style="font-size: 10px;">ss</a> <a href="/tags/ssh/" style="font-size: 14px;">ssh</a> <a href="/tags/ssm/" style="font-size: 14px;">ssm</a> <a href="/tags/weChat/" style="font-size: 10px;">weChat</a> <a href="/tags/web/" style="font-size: 18px;">web</a> <a href="/tags/依赖/" style="font-size: 10px;">依赖</a> <a href="/tags/博客创建/" style="font-size: 10px;">博客创建</a> <a href="/tags/反射/" style="font-size: 10px;">反射</a> <a href="/tags/注入/" style="font-size: 10px;">注入</a> <a href="/tags/注解/" style="font-size: 10px;">注解</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/06/14/ssDeploy/">ssDeploy</a>
          </li>
        
          <li>
            <a href="/2019/05/21/guankongMission/">guankongMission</a>
          </li>
        
          <li>
            <a href="/2019/04/18/pyDay1/">pyDay1</a>
          </li>
        
          <li>
            <a href="/2019/04/15/DMP-deploy/">DMP_deploy</a>
          </li>
        
          <li>
            <a href="/2019/04/14/oracle/">oracle</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 crowsong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":120,"height":240},"mobile":{"show":false},"log":false});</script></body>
</html>