<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"/>

<link rel="stylesheet" href="/css/main.css?v=7.2.0"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="主流软件系统管理： OA 系统（Office automation）办公自动化，将现代化办公和计算机网络结合的新型办公方式 CRM 系统（Customer Relationship Management）客户关系管理，企业用 CRM 技术来管理与客户间的关系 ERP 系统（Enterprise Resource Planning）企业资源计划，针对物资管理（物流）、人力资源管理（人流）、财务资源管">
<meta name="keywords" content="java,web,ssh">
<meta property="og:type" content="article">
<meta property="og:title" content="BOS_former">
<meta property="og:url" content="http://yoursite.com/2019/02/14/bos/index.html">
<meta property="og:site_name" content="crowsongのblog">
<meta property="og:description" content="主流软件系统管理： OA 系统（Office automation）办公自动化，将现代化办公和计算机网络结合的新型办公方式 CRM 系统（Customer Relationship Management）客户关系管理，企业用 CRM 技术来管理与客户间的关系 ERP 系统（Enterprise Resource Planning）企业资源计划，针对物资管理（物流）、人力资源管理（人流）、财务资源管">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="d:/hexo/source/_posts/bos/hibernate%20逆向建表.png">
<meta property="og:image" content="d:/hexo/source/_posts/bos/分区组合条件查询结构.png">
<meta property="og:updated_time" content="2019-03-11T01:09:47.389Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="BOS_former">
<meta name="twitter:description" content="主流软件系统管理： OA 系统（Office automation）办公自动化，将现代化办公和计算机网络结合的新型办公方式 CRM 系统（Customer Relationship Management）客户关系管理，企业用 CRM 技术来管理与客户间的关系 ERP 系统（Enterprise Resource Planning）企业资源计划，针对物资管理（物流）、人力资源管理（人流）、财务资源管">
<meta name="twitter:image" content="d:/hexo/source/_posts/bos/hibernate%20逆向建表.png">



  <link rel="alternate" href="/atom.xml" title="crowsongのblog" type="application/atom+xml"/>



  
  
  <link rel="canonical" href="http://yoursite.com/2019/02/14/bos/"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>BOS_former | crowsongのblog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">crowsongのblog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Navigationsleiste an/ausschalten">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br/>Startseite</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br/>Archiv</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/14/bos/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="crowsong"/>
      <meta itemprop="description" content="日々私たちが过ごしている日常は、実は、奇迹の连続なのかもしれない"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="crowsongのblog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">BOS_former

              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-02-14 18:11:22" itemprop="dateCreated datePublished" datetime="2019-02-14T18:11:22+08:00">2019-02-14</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Bearbeitet am</span>
                
                <time title="Geändert am: 2019-03-11 09:09:47" itemprop="dateModified" datetime="2019-03-11T09:09:47+08:00">2019-03-11</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br/>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h5 id="主流软件系统管理："><a href="#主流软件系统管理：" class="headerlink" title="主流软件系统管理："></a>主流软件系统管理：</h5><ul>
<li>OA 系统（Office automation）办公自动化，将现代化办公和计算机网络结合的新型办公方式</li>
<li>CRM 系统（Customer Relationship Management）客户关系管理，企业用 CRM 技术来管理与客户间的关系</li>
<li>ERP 系统（Enterprise Resource Planning）企业资源计划，针对物资管理（物流）、人力资源管理（人流）、财务资源管理（财流）、信息资源管理（信息流）集成一体的企业管理软件</li>
</ul>
<a id="more"></a>
<hr>
<h5 id="Maven-项目环境"><a href="#Maven-项目环境" class="headerlink" title="Maven 项目环境"></a>Maven 项目环境</h5><p>使用 maven 工具可以进行 依赖管理 和 项目构建</p>
<p>bos-parent：父工程，统一管理依赖，是一个聚合工程（可以简化操作，只需要在聚合中执行一次，其子工程可以一起执行）</p>
<ul>
<li>bos-web</li>
<li>bos-service</li>
<li>bos-dao</li>
<li>bos-domain</li>
<li>bos-utils</li>
</ul>
<p>struts 配置文件中，action 中不写 class=“” ，就会访问<code>org/apache/struts/struts2-core/2.3.24/struts2-core-2.3.24.jar!/struts-default.xml</code> 下的默认 class<code>&lt;default-class-ref class=&quot;com.opensymphony.xwork2.ActionSupport&quot; /&gt;</code> ActionSupport 的默认方法 execute(){return SUCCESS}，当restult 中没有 name 属性，默认为 success，直接跳转到 WEB-INF 下 pages/xxx/yyy.jsp。因为 WEB-INF 下的页面收到保护不能直接访问，只能通过 action 跳转</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"page_*_*"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">type</span>=<span class="string">"dispatcher"</span>&gt;</span>/WEB-INF/pages/&#123;1&#125;/&#123;2&#125;.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="easyui"><a href="#easyui" class="headerlink" title="easyui"></a>easyui</h5><ul>
<li><p>页面布局 layout</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">"easyui-layout"</span>&gt;</span><br><span class="line"></span><br><span class="line">	&lt;div title=<span class="string">"东部菜单"</span> style=<span class="string">"height:100px"</span> data-options=<span class="string">"region:'north'"</span>&gt;北部区域	&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">	&lt;div style="width:200px" data-options="region:'west'"&gt;西部区域&lt;/</span>div&gt;</span><br><span class="line">	&lt;div  data-options=<span class="string">"region:'center'"</span>&gt;中部区域&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">	&lt;div style="width:200px" data-options="region:'east'"&gt;东部区域&lt;/</span>div&gt;</span><br><span class="line">	&lt;div style=<span class="string">"height:50px"</span> data-options=<span class="string">"region:'south'"</span>&gt;南部区域&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>折叠面板 accordion</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">"easyui-layout"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;div title=<span class="string">"管理系统"</span> style=<span class="string">"height:100px"</span> data-options=<span class="string">"region:'north'"</span>&gt;北部区域&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div title="系统菜单" style="width:200px" data-options="region:'west'"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;%--fit:自适应，填充父容器--%&gt;</span></span><br><span class="line"><span class="regexp">    &lt;%--arrordion 折叠面板--%&gt;</span></span><br><span class="line"><span class="regexp">  &lt;div class="easyui-accordion" data-options="fit:true"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div title="面板一"&gt;aaa&lt;/</span>div&gt;</span><br><span class="line">    &lt;div title=<span class="string">"面板二"</span>&gt;bbb&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div title="面板三"&gt;ccc&lt;/</span>div&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line">&lt;div  data-options=<span class="string">"region:'center'"</span>&gt;中部区域&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div style="width:200px" data-options="region:'east'"&gt;东部区域&lt;/</span>div&gt;</span><br><span class="line">&lt;div style=<span class="string">"height:50px"</span> data-options=<span class="string">"region:'south'"</span>&gt;南部区域&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>选项卡面板 tabs</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;body <span class="class"><span class="keyword">class</span></span>=<span class="string">"easyui-layout"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;div title=<span class="string">"管理系统"</span> style=<span class="string">"height:100px"</span> data-options=<span class="string">"region:'north'"</span>&gt;北部区域&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div title="系统菜单" style="width:200px" data-options="region:'west'"&gt;&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;%--tabs选项卡面板--%&gt;</span></span><br><span class="line"><span class="regexp">&lt;div  class="easyui-tabs" data-options="region:'center'"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;div data-options="iconCls:'icon-cut',closable:true" title="面板一"&gt;aaa&lt;/</span>div&gt;</span><br><span class="line">  &lt;div data-options=<span class="string">"closable:true"</span> title=<span class="string">"面板二"</span>&gt;bbb&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;div title="面板三"&gt;ccc&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div style="width:200px" data-options="region:'east'"&gt;东部区域&lt;/</span>div&gt;</span><br><span class="line">&lt;div style=<span class="string">"height:50px"</span> data-options=<span class="string">"region:'south'"</span>&gt;南部区域&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="jquery-动态添加-tabs"><a href="#jquery-动态添加-tabs" class="headerlink" title="jquery 动态添加 tabs"></a>jquery 动态添加 tabs</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"easyui-accordion"</span> data-options=<span class="string">"fit:true"</span>&gt;</span><br><span class="line">  &lt;div data-options=<span class="string">"iconCls:'icon-cut'"</span> title=<span class="string">"面板一"</span>&gt;</span><br><span class="line">    &lt;a id=<span class="string">"but1"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"easyui-linkbutton"</span>&gt;添加选项卡&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script type="text/</span>javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">      $(function()&#123;</span></span><br><span class="line"><span class="string">          // 页面加载完成，为按钮添加绑定事件</span></span><br><span class="line">          $("#but1").click(function()&#123;</span><br><span class="line">              <span class="comment">// 调用 tabs 对象的 add 方法</span></span><br><span class="line">              <span class="keyword">if</span>($(<span class="string">"#mytabs"</span>).tabs(<span class="string">"exists"</span>,<span class="string">"系统管理"</span>))&#123;</span><br><span class="line">                  $(<span class="string">"#mytabs"</span>).tabs(<span class="string">"select"</span>,<span class="string">"系统管理"</span>);</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                  $(<span class="string">"#mytabs"</span>).tabs(<span class="string">"add"</span>,&#123;</span><br><span class="line">                      title:<span class="string">'系统管理'</span>,</span><br><span class="line">                      iconCls:<span class="string">'icon-edit'</span>,</span><br><span class="line">                      closable:<span class="literal">true</span>,</span><br><span class="line">                      content:<span class="string">'&lt;iframe frameborder="0" height="100%" width="100%" src="http://www.baidu.com"&gt;&lt;/iframe&gt;'</span></span><br><span class="line">                  &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="Ztree-的使用"><a href="#Ztree-的使用" class="headerlink" title="Ztree 的使用"></a>Ztree 的使用</h5><p>方法一（了解）：利用 json 嵌套</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div title=<span class="string">"面板二"</span>&gt;</span><br><span class="line">  &lt;%--展示 ztree--%&gt;</span><br><span class="line">    &lt;%-- 这里 <span class="class"><span class="keyword">class</span> 必须为 <span class="title">ztree</span>，不然展开样式会无法应用 --%&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">ul</span> <span class="title">id</span></span>=<span class="string">"ztree1"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"ztree"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="comment">// 页面加载后执行这段代码，表示创建 stree 属性全部为默认值</span></span><br><span class="line">       <span class="keyword">var</span> setting = &#123;&#125;;</span><br><span class="line">       <span class="comment">// 构造节点数组</span></span><br><span class="line">       <span class="keyword">var</span> zNodes = [</span><br><span class="line">           <span class="comment">// 每个 json 对象表示一个节点数据</span></span><br><span class="line">           &#123;<span class="string">"name"</span>:<span class="string">"节点一"</span>,<span class="string">"children"</span>:[</span><br><span class="line">                   &#123;<span class="string">"name"</span>:<span class="string">"子节点一"</span>&#125;,</span><br><span class="line">                   &#123;<span class="string">"name"</span>:<span class="string">"子节点二"</span>&#125;</span><br><span class="line">               ]&#125;,</span><br><span class="line">           &#123;<span class="string">"name"</span>:<span class="string">"节点二"</span>&#125;,</span><br><span class="line">           &#123;<span class="string">"name"</span>:<span class="string">"节点三"</span>&#125;</span><br><span class="line">       ];</span><br><span class="line">       <span class="comment">// 调用 api 初始化 ztree</span></span><br><span class="line">       $.fn.zTree.init($(<span class="string">"#ztree1"</span>),setting,zNodes);</span><br><span class="line">    &#125;);</span><br><span class="line">  &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>
<p>方法二（重要）：利用简单 json 构建子节点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">setting 的区别，将 simpleDate enable 设置为 <span class="literal">true</span></span><br><span class="line"><span class="keyword">var</span> setting2 = &#123;</span><br><span class="line">                  data: &#123;</span><br><span class="line">                      simpleData: &#123;</span><br><span class="line">                          enable: <span class="literal">true</span></span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;&#125;;</span><br><span class="line">节点数组的区别</span><br><span class="line"><span class="keyword">var</span> zNodes2 = [</span><br><span class="line">    <span class="comment">// 每个 json 对象表示一个节点数据</span></span><br><span class="line">    &#123;<span class="string">"id"</span>:<span class="number">1</span>,<span class="string">"pId"</span>:<span class="number">0</span>,<span class="string">"name"</span>:<span class="string">"节点一"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"id"</span>:<span class="number">2</span>,<span class="string">"pId"</span>:<span class="number">1</span>,<span class="string">"name"</span>:<span class="string">"节点二"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"id"</span>:<span class="number">3</span>,<span class="string">"pId"</span>:<span class="number">2</span>,<span class="string">"name"</span>:<span class="string">"节点三"</span>&#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="idea-下反向工程生成-entity-及其-hbm-xml"><a href="#idea-下反向工程生成-entity-及其-hbm-xml" class="headerlink" title="idea 下反向工程生成 entity 及其 hbm.xml"></a>idea 下反向工程生成 entity 及其 hbm.xml</h5><ul>
<li>为模块添加 hibernate（不然后面会找不到 persistence 选项）</li>
<li>右侧 （或者 view tool windows） database</li>
<li>点击 + 号，选择 DataSource、Mysql，添加用户密码数据库</li>
<li>左侧（或者 view tool windows）persistence，选择右键 Generate Persistence Mapping - By DataBase Schema 添加 hibernate 持久层支持，生成实体 Bean 、配置文件</li>
<li>选择数据库和要存放 bean 的包，选择需要生成的 DataBase Schema</li>
<li>可以选择不添加 Session Factory，但需要手动添加</li>
<li>选择 Xml per Entity（hbm.xml）或者 JPA Annotation（注释）</li>
</ul>
<p><a href="https://www.cnblogs.com/java-class/p/6208356.html" target="_blank" rel="noopener">idea 逆向工程实践</a></p>
<p><a href="https://my.oschina.net/u/1035653/blog/494285" target="_blank" rel="noopener">idea hibernate 反向工程</a></p>
<hr>
<h5 id="代码抽取"><a href="#代码抽取" class="headerlink" title="代码抽取"></a>代码抽取</h5><p>持久层代码抽取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.bos.dao.base.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.bos.dao.base.IbaseDao;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.orm.hibernate5.support.HibernateDaoSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseDaoImpl</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">HibernateDaoSupport</span> <span class="keyword">implements</span> <span class="title">IbaseDao</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"><span class="comment">//    代表某个实体类型</span></span><br><span class="line">    <span class="keyword">private</span> Class&lt;T&gt; entityClass;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseDaoImpl</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">/**在该类的构造方法中获得调用它的子类的实体类型</span></span><br><span class="line"><span class="comment">         * this 代表调用 BaseDaoImpl 的子类,getClass 获得 BaseDaoImpl 子类的类类型，</span></span><br><span class="line"><span class="comment">         *   getGenericSuperclass 表示获得 BaseDaoImpl 子类的父类的类类型，即 BaseDaoImpl 本身</span></span><br><span class="line"><span class="comment">         *   为了获取运行时 BaseDaoImpl&lt;T&gt; 中 T 的值,需要用到 Type 的子接口的方法，</span></span><br><span class="line"><span class="comment">         *   所以将其强转成 ParameterizedType,</span></span><br><span class="line"><span class="comment">         *   使用 getActualTypeArguments 可以获得父类声明的泛型数组的值,&lt;T,a,b,c&gt; 中可以为多个值</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ParameterizedType superclass = (ParameterizedType)<span class="keyword">this</span>.getClass().getGenericSuperclass();</span><br><span class="line">        Type[] types = superclass.getActualTypeArguments();</span><br><span class="line">        entityClass = (Class) types[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 因为 spring 中使用了注解的方式，没有配置</span></span><br><span class="line"><span class="comment">     * &lt;bean id="userDao" class="xxxUserImpl"&gt;</span></span><br><span class="line"><span class="comment">     *      &lt;property name="sessionFactory" ref="sessionFactory"&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">     * &lt;/bean&gt;</span></span><br><span class="line"><span class="comment">     * 所以 userDao 无法获得 sessionFactory 对象，需要自己配置注入方法</span></span><br><span class="line"><span class="comment">     * 随便创建一个方法，给予 SessionFactory 对象</span></span><br><span class="line"><span class="comment">     * spring 中已经配置了 SessionFactory，所以 mySessionFactory可以获得 SessionFactory 参数</span></span><br><span class="line"><span class="comment">     * 利用 <span class="doctag">@Resource</span> 注解注入到 spring</span></span><br><span class="line"><span class="comment">     * 调用 父类也就是 HibernateDaoSupport 的</span></span><br><span class="line"><span class="comment">     * this.hibernateTemplate = createHibernateTemplate(sessionFactory);方法</span></span><br><span class="line"><span class="comment">     * 创建 hibernateTemplate 模板对象，然后用 <span class="doctag">@Resource</span> 注解注入到 spring</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sessionFactory</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mySessionFactory</span><span class="params">(SessionFactory sessionFactory)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.setSessionFactory(sessionFactory);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(T entity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.getHibernateTemplate().save(entity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(T entity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.getHibernateTemplate().delete(entity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(T entity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.getHibernateTemplate().update(entity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">findById</span><span class="params">(Serializable id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getHibernateTemplate().get(entityClass,id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">findAll</span><span class="params">(T entity)</span> </span>&#123;</span><br><span class="line">        String hql = <span class="string">"FROM "</span> + entityClass.getSimpleName();</span><br><span class="line">        <span class="keyword">return</span> (List&lt;T&gt;)<span class="keyword">this</span>.getHibernateTemplate().find(hql);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>表现层代码抽取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.bos.web.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ModelDriven;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseAction</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">ActionSupport</span> <span class="keyword">implements</span> <span class="title">ModelDriven</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T model;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getModel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> model;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造方法动态获取实体类型</span></span><br><span class="line"><span class="comment">     * 通过反射获得子类的类类型，然后用 反射 实例化（创建 model 对象）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseAction</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//        为了使用子类的方法，强转</span></span><br><span class="line">        ParameterizedType genericSuperclass = (ParameterizedType) <span class="keyword">this</span>.getClass().getGenericSuperclass();</span><br><span class="line"><span class="comment">//        获得 BaseAction &lt;T&gt; 中 T 的值（获得范型数组&lt;T&gt;)</span></span><br><span class="line">        Type[] actualTypeArguments = genericSuperclass.getActualTypeArguments();</span><br><span class="line">        Class&lt;T&gt; entityClass = (Class&lt;T&gt;) actualTypeArguments[<span class="number">0</span>];</span><br><span class="line"><span class="comment">//        通过反射创建对象</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            model = entityClass.newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="easyUI-的一些方法"><a href="#easyUI-的一些方法" class="headerlink" title="easyUI 的一些方法"></a>easyUI 的一些方法</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">信息提示框</span><br><span class="line">$.messager.alert（title, msg, icon, fn）</span><br><span class="line">确认方法</span><br><span class="line">$.messager.confirm（title, msg, fn）</span><br><span class="line">右下角的信息窗</span><br><span class="line">$.messager.show(&#123;</span><br><span class="line">            title:<span class="string">'标题'</span>,</span><br><span class="line">            msg:<span class="string">'内容'</span>,</span><br><span class="line">            timeout:<span class="number">3000</span>,</span><br><span class="line">            <span class="comment">// 表示滑动出现跟消失</span></span><br><span class="line">            showType:<span class="string">'slide'</span></span><br><span class="line">        &#125;)；</span><br></pre></td></tr></table></figure>
<p>菜单制作</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--制作菜单--%&gt;</span><br><span class="line">&lt;a data-options="iconCls:'icon-help',menu:'#mm'" class="easyui-menubutton" &gt;控制面板&lt;/a&gt;</span><br><span class="line">&lt;%--使用 div 创建下拉菜单--%&gt;</span><br><span class="line">&lt;div id=<span class="string">"mm"</span>&gt;</span><br><span class="line">  &lt;%--添加修改图标--%&gt;</span><br><span class="line">  &lt;div onclick="alert('点击事件')" data-options="iconCls:'icon-edit'"&gt;修改密码&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;联系管理员&lt;/div&gt;</span><br><span class="line">  &lt;%--分隔符 separate 的缩写，添加分割线--%&gt;</span><br><span class="line">  &lt;div class="menu-sep"&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;退出系统&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h5 id="设置拦截器将未登录用户跳转到登录页面"><a href="#设置拦截器将未登录用户跳转到登录页面" class="headerlink" title="设置拦截器将未登录用户跳转到登录页面"></a>设置拦截器将未登录用户跳转到登录页面</h5><p>编写拦截器，继承 struts2 框架的 MethodFilterInterceptor 类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BOSLoginInterceptor</span> <span class="keyword">extends</span> <span class="title">MethodFilterInterceptor</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自定义拦截器，实现未登录用户自动跳转到登录页面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> actionInvocation</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">doIntercept</span><span class="params">(ActionInvocation actionInvocation)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="comment">//        用工具类 从 session 获取登录对象</span></span><br><span class="line">        User user = BOSUtils.getLoginUser();</span><br><span class="line">        <span class="keyword">if</span>(user==<span class="keyword">null</span>)&#123;</span><br><span class="line"><span class="comment">//            没登录，跳转到登录页面,LOGIN 等常量来自于 Action 接口，拦截器没有实现 action 接口，所以无法使用，只能自己写字符串 “login”</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        放行</span></span><br><span class="line">        <span class="keyword">return</span> invocation.invoke();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>工具类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.bos.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.bos.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.struts2.ServletActionContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * BOS 项目的工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BOSUtils</span> </span>&#123;</span><br><span class="line"><span class="comment">//    获取 session 对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpSession <span class="title">getSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ServletActionContext.getRequest().getSession();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    获取 登录用户对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> User <span class="title">getLoginUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (User) BOSUtils.getSession().getAttribute(<span class="string">"loginUser"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>struts2.xml 配置拦截器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">interceptors</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--注册自定义拦截器--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"bosLoginInterceptor"</span> <span class="attr">class</span>=<span class="string">"com.itheima.bos.web.interceptor.BOSLoginInterceptor"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--排除登录方法拦截--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"excludeMethods"</span>&gt;</span>login<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">interceptor</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--定义拦截器栈--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">interceptor-stack</span> <span class="attr">name</span>=<span class="string">"myStack"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"bosLoginInterceptor"</span>/&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--struts2 自带的拦截器栈--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"defaultStack"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">interceptor-stack</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">interceptors</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置拦截器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">default-interceptor-ref</span> <span class="attr">name</span>=<span class="string">"myStack"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用 validatabox 进行非空校验和长度校验</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;tr&gt;</span><br><span class="line">    &lt;td&gt;新密码：&lt;/td&gt;</span><br><span class="line">    &lt;%--使用 easyui-valudatebox 属性需要 <span class="class"><span class="keyword">class</span> 中填写该值，然后可以使用 <span class="title">required</span></span>=“<span class="keyword">true</span>”/<span class="string">"required"</span> 进行非空判断，data-optoins=<span class="string">"validType:'length[4,6]'"</span>，进行输入密码的长度判断--%&gt;</span><br><span class="line">    &lt;td&gt;&lt;input  required="true" data-options="validType:'length[4,6]'" id="txtNewPass" type="Password" class="txt01 easyui-validatebox" /&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">&lt;tr&gt;</span><br><span class="line">    &lt;td&gt;确认密码：&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;&lt;input required="true" data-options="validType:'length[4,6]'" id="txtRePass" type="Password" class="txt01 easyui-validatebox" /&gt;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br></pre></td></tr></table></figure>
<p>为 jsp 页面方法添加 onclick 事件校验输入密码是否一致</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">$(<span class="string">"#btnEp"</span>).click(function()&#123;</span><br><span class="line">    var isValid = $(<span class="string">"#editPasswordForm"</span>).form(<span class="string">'validate'</span>);</span><br><span class="line">    <span class="keyword">if</span>(isValid)&#123;</span><br><span class="line">        <span class="comment">//两次输入是否一致</span></span><br><span class="line">        var v1 = $(<span class="string">"#txtNewPass"</span>).val();</span><br><span class="line">        var v2 = $(<span class="string">"#txtRePass"</span>).val();</span><br><span class="line">        <span class="keyword">if</span>(v1==v2)&#123;</span><br><span class="line">            <span class="comment">// 一致</span></span><br><span class="line">            $.post(<span class="string">"UserAction_editPassword.action"</span>,&#123;<span class="string">"password"</span>:v2&#125;,function(data)&#123;</span><br><span class="line">     <span class="keyword">if</span>(data==<span class="string">"1"</span>)&#123;</span><br><span class="line">         <span class="comment">// 提示成功，关闭窗口</span></span><br><span class="line">       $(<span class="string">"#editPwdWindow"</span>).window(<span class="string">"close"</span>);</span><br><span class="line">     &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         $.messager.alert(<span class="string">"提示"</span>,<span class="string">"修改密码失败"</span>)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   $.messager.alert(<span class="string">"提示"</span>,<span class="string">"两次输入密码不一致"</span>);</span><br><span class="line"> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>UserAction 的密码校验方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户修改密码方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">editPassword</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String flag=<span class="string">"1"</span>;</span><br><span class="line"><span class="comment">//        修改当前用户密码</span></span><br><span class="line">        User user = BOSUtils.getLoginUser();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            userService.editPassword(user.getId(),model.getPassword());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            flag=<span class="string">"0"</span>;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        ServletActionContext.getResponse().getWriter().write(flag);</span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>UserDao 的密码校验方法,使用 executeUpdate 增加复用性，传入 queryName 参数表示在 hbm.xml 的 hibernate 映射文件中配置的 query 语句名，objects 表示多个参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">executeUpdate</span><span class="params">(String queryName, Object... objects)</span> </span>&#123;</span><br><span class="line">        Session currentSession = <span class="keyword">this</span>.getSessionFactory().getCurrentSession();</span><br><span class="line">        Query query = currentSession.getNamedQuery(queryName);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        为 HQL 中 ？ 赋值</span></span><br><span class="line">        <span class="keyword">int</span> i =<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> length = objects.length;</span><br><span class="line">        <span class="keyword">for</span>(Object obj : objects)&#123;</span><br><span class="line">            query.setParameter(i++,obj);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        执行更新</span></span><br><span class="line">        query.executeUpdate();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>hibernate 实体 bean 的 映射文件中定义更新语句</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC</span></span><br><span class="line"><span class="meta">    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></span><br><span class="line"><span class="meta">    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.itheima.bos.domain.User"</span> <span class="attr">table</span>=<span class="string">"t_user"</span> <span class="attr">schema</span>=<span class="string">"bos32"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">column</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"salary"</span> <span class="attr">column</span>=<span class="string">"salary"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"birthday"</span> <span class="attr">column</span>=<span class="string">"birthday"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">column</span>=<span class="string">"gender"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"station"</span> <span class="attr">column</span>=<span class="string">"station"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"telephone"</span> <span class="attr">column</span>=<span class="string">"telephone"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"remark"</span> <span class="attr">column</span>=<span class="string">"remark"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">%--query</span> 语句<span class="attr">--</span>%&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">query</span> <span class="attr">name</span>=<span class="string">"user.editPassword"</span>&gt;</span></span><br><span class="line">        UPDATE User SET password = ? WHERE id = ?</span><br><span class="line">    <span class="tag">&lt;/<span class="name">query</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="idea-hibernate-映射关系配置"><a href="#idea-hibernate-映射关系配置" class="headerlink" title="idea hibernate 映射关系配置"></a>idea hibernate 映射关系配置</h5><p><img src="D:\hexo\source\_posts\bos\hibernate 逆向建表.png" alt="1550416562245"></p>
<p><a href="https://www.cnblogs.com/solverpeng/p/5948461.html" target="_blank" rel="noopener">idea hibernae 映射关系配置</a></p>
<hr>
<h5 id="添加手机号码校验"><a href="#添加手机号码校验" class="headerlink" title="添加手机号码校验"></a>添加手机号码校验</h5><p>jsp 端</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;tr&gt;</span><br><span class="line"> &lt;td&gt;手机&lt;/td&gt;</span><br><span class="line"> &lt;td&gt;</span><br><span class="line">  &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">   <span class="comment">// 扩展手机号校验规则</span></span><br><span class="line">   $(function()&#123;</span><br><span class="line">       <span class="comment">// 为保存按钮添加保存功能</span></span><br><span class="line">     $(<span class="string">"#save"</span>).click(function()&#123;</span><br><span class="line">         var v = $(<span class="string">"#addStaffForm"</span>).form(<span class="string">"validate"</span>);</span><br><span class="line">         <span class="keyword">if</span>(v)&#123;</span><br><span class="line">                       $(<span class="string">"#addStaffForm"</span>).submit();</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;);</span><br><span class="line"></span><br><span class="line">       var reg = /^<span class="number">1</span>[<span class="number">3</span>|<span class="number">4</span>|<span class="number">5</span>|<span class="number">7</span>|<span class="number">8</span>][<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">9</span>&#125;$/;</span><br><span class="line">               $.extend($.fn.validatebox.defaults.rules,</span><br><span class="line">       &#123;</span><br><span class="line">                     telephone:&#123;</span><br><span class="line">                         validator:function(value,param)&#123;</span><br><span class="line">                             <span class="keyword">return</span> reg.test(value);</span><br><span class="line">                         &#125;,</span><br><span class="line">                         message:<span class="string">'手机号输入格式错误'</span></span><br><span class="line">                     &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line"></span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  &lt;input type="text" data-options="validType:'telephone'" name="telephone" class="easyui-validatebox" required="true"/&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="easyui-datagrid-创建"><a href="#easyui-datagrid-创建" class="headerlink" title="easyui-datagrid 创建"></a>easyui-datagrid 创建</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--使用插件提供的 api 动态创建 datagrid--%&gt;</span><br><span class="line">&lt;table id=<span class="string">"mytable"</span>&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">  $(function()&#123;</span><br><span class="line">     $(<span class="string">"#mytable"</span>).datagrid(&#123;</span><br><span class="line">         <span class="comment">// 指定 ajax 发送请求地址</span></span><br><span class="line">         url:<span class="string">'$&#123;pageContext.request.contextPath&#125;/json/datagrid_data.json'</span>,</span><br><span class="line">         <span class="comment">//定义标题行所有的列</span></span><br><span class="line">         columns:[[</span><br><span class="line">          &#123;title:<span class="string">'编号'</span>,field:<span class="string">'id'</span>,checkbox:<span class="keyword">true</span>&#125;,</span><br><span class="line">          &#123;title:<span class="string">'姓名'</span>,field:<span class="string">'name'</span>&#125;,</span><br><span class="line">          &#123;title:<span class="string">'性别'</span>,field:<span class="string">'age'</span>&#125;,</span><br><span class="line">          &#123;title:<span class="string">'住址'</span>,field:<span class="string">'address'</span>&#125;</span><br><span class="line">      ]],</span><br><span class="line">         rownumbers:<span class="keyword">true</span>,</span><br><span class="line">         singleSelect:<span class="keyword">true</span>,</span><br><span class="line">         <span class="comment">// 定义工具栏</span></span><br><span class="line">         toolbar:[</span><br><span class="line">             &#123;text:<span class="string">"添加"</span>,iconCls:<span class="string">"icon-add"</span>,</span><br><span class="line">                 <span class="comment">//为按钮绑定单击事件</span></span><br><span class="line">                 handler:function()&#123;</span><br><span class="line">                     alert(<span class="string">"点击添加"</span>);</span><br><span class="line">                 &#125;&#125;,</span><br><span class="line">             &#123;text:<span class="string">"删除"</span>,iconCls:<span class="string">"icon-remove"</span>&#125;,</span><br><span class="line">             &#123;text:<span class="string">"修改"</span>,iconCls:<span class="string">"icon-edit"</span>&#125;,</span><br><span class="line">             &#123;text:<span class="string">"查询"</span>,iconCls:<span class="string">"icon-search"</span>&#125;</span><br><span class="line">         ],</span><br><span class="line">         <span class="comment">// 显示分页条</span></span><br><span class="line">         pagination:<span class="keyword">true</span></span><br><span class="line">     &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>dao 查询分页方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通用查询分页方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageBean</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pageQuery</span><span class="params">(PageBean pageBean)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> currentPage = pageBean.getCurrentPage();</span><br><span class="line">        <span class="keyword">int</span> pageSize = pageBean.getPageSize();</span><br><span class="line">        DetachedCriteria detachedCriteria = pageBean.getDetachedCriteria();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询 pageBean 的 total （总记录数）</span></span><br><span class="line"><span class="comment">//        指定 hibernate 发出 sql 语句的形式，rowCount 会发出 count(*) 的 sql</span></span><br><span class="line">        detachedCriteria.setProjection(Projections.rowCount());</span><br><span class="line">        List&lt;Long&gt; countList = (List&lt;Long&gt;) <span class="keyword">this</span>.getHibernateTemplate().findByCriteria(detachedCriteria);</span><br><span class="line"><span class="comment">//        获得 list 集合的第一个数据，因为只有一个数据所以就是 记录数</span></span><br><span class="line">        Long count = countList.get(<span class="number">0</span>);</span><br><span class="line"><span class="comment">//        将总条数放入 pageBean</span></span><br><span class="line">        pageBean.setTotal(count.intValue());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询 rows（当前页需要展示的数据集合）</span></span><br><span class="line"><span class="comment">//        将 hibernate 发出 sql 语句的形式改回来，select * from xxx 的形式</span></span><br><span class="line">        detachedCriteria.setProjection(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">int</span> firstResult = (currentPage-<span class="number">1</span>)*pageSize;</span><br><span class="line">        <span class="keyword">int</span> maxResults = pageSize;</span><br><span class="line">        List rows = <span class="keyword">this</span>.getHibernateTemplate().findByCriteria(detachedCriteria, firstResult, maxResults);</span><br><span class="line">        pageBean.setRows(rows);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>web 层分页查询方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页查询方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">pageQuery</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        PageBean pageBean = <span class="keyword">new</span> PageBean();</span><br><span class="line">        pageBean.setCurrentPage(page);</span><br><span class="line">        pageBean.setPageSize(rows);</span><br><span class="line"><span class="comment">//        创建提交离线查询对象，告诉 hibernate 该查哪张表</span></span><br><span class="line">        DetachedCriteria detachedCriteria = DetachedCriteria.forClass(Staff.class);</span><br><span class="line">        pageBean.setDetachedCriteria(detachedCriteria);</span><br><span class="line"></span><br><span class="line">        staffService.pageQuery(pageBean);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        使用 json-lib 将 pageBean 转化为 json 对象，通过输出流返回页面</span></span><br><span class="line"><span class="comment">//        jsonObject 用于将单一对象转换成 josn</span></span><br><span class="line"><span class="comment">//        jsonArray 用于将数组集合转换成 json</span></span><br><span class="line">        JsonConfig jsonConfig = <span class="keyword">new</span> JsonConfig();</span><br><span class="line"><span class="comment">//        指定不需要转为 josn 的属性</span></span><br><span class="line">        jsonConfig.setExcludes(<span class="keyword">new</span> String[]&#123;<span class="string">"currentPage"</span>,<span class="string">"detachedCriteria"</span>,<span class="string">"pageSize"</span>&#125;);</span><br><span class="line">        String json = JSONObject.fromObject(pageBean,jsonConfig).toString();</span><br><span class="line"><span class="comment">//        该方法有重载方法，可以选择是否传入 jsonConfig</span></span><br><span class="line"><span class="comment">//        String json = JSONObject.fromObject(pageBean).toString();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        将 json 用输出流写回页面</span></span><br><span class="line">        ServletActionContext.getResponse().setContentType(<span class="string">"text/json;charset=utf-8"</span>);</span><br><span class="line">        ServletActionContext.getResponse().getWriter().write(json);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>response.getWriter()返回的是PrintWriter，这是一个打印输出流。<br>response.getWriter().print(),不仅可以打印输出文本格式的（包括html标签），还可以将一个对象以默认的编码方式转换为二进制字节输出</p>
<p><a href="https://blog.csdn.net/sjl6666666666/article/details/53239820" target="_blank" rel="noopener">response.getWriter().write() 和 print 区别</a></p>
<p><a href="https://blog.csdn.net/qq_27088383/article/details/50468779" target="_blank" rel="noopener">数组集合区别</a></p>
<hr>
<h5 id="派件员批量删除按钮添加事件"><a href="#派件员批量删除按钮添加事件" class="headerlink" title="派件员批量删除按钮添加事件"></a>派件员批量删除按钮添加事件</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"><span class="function">function <span class="title">doDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 获得数据表格中选中的行，返回数组对象,如果没有选择则返回空数组</span></span><br><span class="line">  var rows =  $(<span class="string">"#grid"</span>).datagrid(<span class="string">"getSelections"</span>);</span><br><span class="line">  <span class="keyword">if</span>(rows.length==<span class="number">0</span>)&#123;</span><br><span class="line">      <span class="comment">//没有选中记录，弹出信息</span></span><br><span class="line">    $.messager.alert(<span class="string">"提示信息"</span>,<span class="string">"请选择需要删除的取派员"</span>,<span class="string">"warning"</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">//选中了取派员，弹出确认框，是否删除</span></span><br><span class="line">    $.messager.confirm(<span class="string">"确认提醒"</span>,<span class="string">"是否需要删除选中的取派员"</span>,</span><br><span class="line">      function(r)&#123;</span><br><span class="line">          <span class="keyword">if</span>(r)&#123;</span><br><span class="line">              var array = <span class="keyword">new</span> Array();</span><br><span class="line">              <span class="comment">//确认删除，发送请求，获取所有选中取派员的 id</span></span><br><span class="line">         <span class="keyword">for</span>(var i=<span class="number">0</span>;i&lt;rows.length;i++)&#123;</span><br><span class="line">           var staff = rows[i];</span><br><span class="line">           var id = staff.id;</span><br><span class="line">           array.push(id);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="comment">// alert(array.join(","));</span></span><br><span class="line">         var ids = array;</span><br><span class="line">         <span class="comment">// location.href = "staffAction_deleteBatch.action?ids="+ids;</span></span><br><span class="line">         $.post(<span class="string">"staffAction_deleteBatch.action?ids="</span>+ids);</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>使用 array.join(“,”); 可以指定 array 各个数组间的分割类型，如果不用 array.join(),默认为 , 分隔符</p>
<hr>
<p>表单回显</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function doDblClickRow(rowIndex, rowData)&#123;</span><br><span class="line">    $(&quot;#editStaffWindow&quot;).window(&quot;open&quot;);</span><br><span class="line">    // 自动回显表单，rowData 参数是一个 json 字段，里面的 name 与表单名一致，所以可以回显</span><br><span class="line">    $(&quot;#editStaffForm&quot;).form(&quot;load&quot;,rowData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>web 层表单修改</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改取派员信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">edit</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//        一般表之间有关联关系，直接用 model 数据覆盖会造成其他关联表误操作</span></span><br><span class="line"><span class="comment">//        根据 id 查询查询原始数据</span></span><br><span class="line">        Staff staff = staffService.findById(model.getId());</span><br><span class="line">        <span class="comment">//使用页面提交的数据覆盖原始数据</span></span><br><span class="line">        staff.setName(model.getName());</span><br><span class="line">        staff.setTelephone(model.getTelephone());</span><br><span class="line">        staff.setHaspda(model.getHaspda());</span><br><span class="line">        staff.setStation(model.getStation());</span><br><span class="line">        staff.setStandard(model.getStandard());</span><br><span class="line">        staffService.update(staff);</span><br><span class="line">        <span class="keyword">return</span> LIST;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="文件上传页面不刷新（伪）"><a href="#文件上传页面不刷新（伪）" class="headerlink" title="文件上传页面不刷新（伪）"></a>文件上传页面不刷新（伪）</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe style="display:none" name="abc"&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;form target=<span class="string">"abc"</span> action=<span class="string">"xxx"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"file"</span> name=<span class="string">"myfile"</span>/&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"upload"</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>easyui 中</p>
<p><code>$(&quot;#form&quot;).form(&quot;submit&quot;)</code></p>
<p>也是采用了隐藏的 iframe 来达到页面不刷新的效果，需要刷新需要使用</p>
<p><code>$(&quot;#form&quot;).submit()</code></p>
<h5 id="ocupload-的-upload-方法实现文件上传不刷新"><a href="#ocupload-的-upload-方法实现文件上传不刷新" class="headerlink" title="ocupload 的 upload 方法实现文件上传不刷新"></a>ocupload 的 upload 方法实现文件上传不刷新</h5><p>底层也是 iframe 原理，利用 jquery 页面加载完毕时修改 div 属性，创建一个 div 块来包裹代码，创建一个文件上传的 form 表单，target 提交到 iframe ，创建 type=”file” 的 input 来覆盖在原来的按钮上，点击原来的按钮时，会上传文件并且刷新隐藏的 iframe 页面</p>
<p>不需要点击提交按钮自动提交文件：按钮绑定一个 onchange 事件，选完文件触发 submit()</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">  $(function()&#123;</span><br><span class="line">      $(<span class="string">"#myButton"</span>).upload(&#123;</span><br><span class="line">          action:<span class="string">'xxx.action'</span>,</span><br><span class="line">          name:<span class="string">'myFile'</span></span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;input id=<span class="string">"myButton"</span> type=<span class="string">"button"</span> value=<span class="string">"上传"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>hidden 是 style 的 visibility 属性，能让元素不可见，但是还是占据空间</p>
<p>display ：none 是将元素不再渲染，不会占据空间</p>
<p>我们有几种方式可以隐藏一个元素：</p>
<ol>
<li>CSS display的值是none。</li>
<li>type=”hidden”的表单元素。</li>
<li>宽度和高度都显式设置为0。</li>
<li>一个祖先元素是隐藏的，该元素是不会在页面上显示</li>
<li>CSS visibility的值是hidden</li>
<li>CSS opacity的指是0</li>
</ol>
<p><a href="http://www.cnblogs.com/liebagefly/p/7503045.html" target="_blank" rel="noopener">hidden 与 display:none 区别</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/23860711" target="_blank" rel="noopener">display:none、visibility:hidden 区别总结</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//页面加载完成后加载 OCUpload 插件方法</span></span><br><span class="line">$(<span class="string">"#button-import"</span>).upload(&#123;</span><br><span class="line">    action:<span class="string">'RegionAction_importXls.action'</span>,</span><br><span class="line">    name:<span class="string">'regionFile'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="区域导入"><a href="#区域导入" class="headerlink" title="区域导入"></a>区域导入</h5><p>action 类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 区域导入</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">importXls</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(regionFile);</span><br><span class="line">        List&lt;Region&gt; regionList = <span class="keyword">new</span> ArrayList&lt;Region&gt;();</span><br><span class="line">        <span class="comment">//使用 POI 解析 Excel 文件</span></span><br><span class="line">        HSSFWorkbook hssfWorkbook = <span class="keyword">new</span> HSSFWorkbook(<span class="keyword">new</span> FileInputStream(regionFile));</span><br><span class="line">        HSSFSheet hssfSheet = hssfWorkbook.getSheet(<span class="string">"Sheet1"</span>);</span><br><span class="line">        <span class="keyword">for</span>(Row row : hssfSheet)&#123;</span><br><span class="line">            <span class="keyword">if</span>(row.getRowNum()==<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            String id = row.getCell(<span class="number">0</span>).getStringCellValue();</span><br><span class="line">            String province = row.getCell(<span class="number">1</span>).getStringCellValue();</span><br><span class="line">            String city = row.getCell(<span class="number">2</span>).getStringCellValue();</span><br><span class="line">            String district = row.getCell(<span class="number">3</span>).getStringCellValue();</span><br><span class="line">            String postcode = row.getCell(<span class="number">4</span>).getStringCellValue();</span><br><span class="line"><span class="comment">//            包装成区域对象</span></span><br><span class="line">            Region region = <span class="keyword">new</span> Region(id,province,city,district,postcode,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//            去除 河北省的 的 省、石家庄市 的 市、桥西区 的 区，等字符串最后一个字符</span></span><br><span class="line">            province = province.substring(<span class="number">0</span>,province.length()-<span class="number">1</span>);</span><br><span class="line">            city = city.substring(<span class="number">0</span>,city.length()-<span class="number">1</span>);</span><br><span class="line">            district = district.substring(<span class="number">0</span>,district.length()-<span class="number">1</span>);</span><br><span class="line"><span class="comment">//            拼接 河北 石家庄 桥西</span></span><br><span class="line">            String info = province + city + district;</span><br><span class="line"><span class="comment">//            获取各个中文字的首字母</span></span><br><span class="line">            String[] head = PinYin4jUtils.getHeadByString(info);</span><br><span class="line"><span class="comment">//            把字符数组拼接成字符串</span></span><br><span class="line">            String shortcode = StringUtils.join(head);</span><br><span class="line"></span><br><span class="line"><span class="comment">//            城市编码 shijiazhuang</span></span><br><span class="line"><span class="comment">//            将汉字转换成拼音</span></span><br><span class="line">            String cityPY = PinYin4jUtils.hanziToPinyin(city, <span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">            region.setShortcode(shortcode);</span><br><span class="line">            region.setCitycode(cityPY);</span><br><span class="line"></span><br><span class="line">            regionList.add(region);</span><br><span class="line">        &#125;</span><br><span class="line">        regionService.saveBatch(regionList);</span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="分页类的重构抽取"><a href="#分页类的重构抽取" class="headerlink" title="分页类的重构抽取"></a>分页类的重构抽取</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原 action 中定义的属性抽取</span></span><br><span class="line"><span class="keyword">protected</span> PageBean pageBean = <span class="keyword">new</span> PageBean();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPage</span><span class="params">(<span class="keyword">int</span> page)</span> </span>&#123;</span><br><span class="line">        pageBean.setCurrentPage(page);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRows</span><span class="params">(<span class="keyword">int</span> rows)</span> </span>&#123;</span><br><span class="line">        pageBean.setPageSize(rows);</span><br><span class="line">    &#125;</span><br><span class="line">    DetachedCriteria detachedCriteria = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将指定 java 对象转换为 josn，并响应到客户端</span></span><br><span class="line"><span class="comment"> * 使用 json-lib 将 pageBean 转化为 json 对象，通过输出流返回页面</span></span><br><span class="line"><span class="comment"> * jsonObject 用于将单一对象转换成 josn</span></span><br><span class="line"><span class="comment"> * jsonArray 用于将数组集合转换成 json</span></span><br><span class="line"><span class="comment"> * JSONObject.fromObject方法有重载方法，可以选择是否传入 jsonConfig</span></span><br><span class="line"><span class="comment"> * String json = JSONObject.fromObject(pageBean).toString();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> excludes</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">java2Json</span><span class="params">(Object o,String [] excludes)</span></span>&#123;</span><br><span class="line">    JsonConfig jsonConfig = <span class="keyword">new</span> JsonConfig();</span><br><span class="line">    <span class="comment">//指定不需要转为 josn 的属性</span></span><br><span class="line">    jsonConfig.setExcludes(excludes);</span><br><span class="line">    String json = JSONObject.fromObject(o,jsonConfig).toString();</span><br><span class="line">    ServletActionContext.getResponse().setContentType(<span class="string">"text/json;charset=utf-8"</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//将 json 用输出流写回页面</span></span><br><span class="line">        ServletActionContext.getResponse().getWriter().write(json);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="分区添加功能"><a href="#分区添加功能" class="headerlink" title="分区添加功能"></a>分区添加功能</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给 Region bean 添加 name get 方法。在 Region 对象转换为 json 时会增加一个 name 字段</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> province + <span class="string">" "</span> + city + <span class="string">" "</span> + district;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>模糊查询 jsp 页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;td&gt;选择区域&lt;/td&gt;</span><br><span class="line">&lt;td&gt;</span><br><span class="line"> &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"easyui-combobox"</span> name=<span class="string">"region.id"</span>  </span><br><span class="line">     data-options=<span class="string">"valueField:'id',</span></span><br><span class="line"><span class="string">     textField:'name',</span></span><br><span class="line"><span class="string">     url:'RegionAction_listajax.action',</span></span><br><span class="line"><span class="string">   mode:'remote'"</span> /&gt;</span><br><span class="line">&lt;/td&gt;</span><br></pre></td></tr></table></figure>
<p>模糊查询分区 Action</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *查询所有区域，写回 json 数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">listajax</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;Region&gt; list =<span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isNotBlank(q)) &#123;</span><br><span class="line">        list = regionService.findListByQ(q);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        list = regionService.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.java2Json(list,<span class="keyword">new</span> String[]&#123;<span class="string">"province"</span>,<span class="string">"city"</span>,<span class="string">"district"</span>,<span class="string">"postcode"</span>,<span class="string">"shortcode"</span>,<span class="string">"citycode"</span>,<span class="string">"subareas"</span>&#125;);</span><br><span class="line">    <span class="keyword">return</span> NONE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 页面 model = 'remote' 查询条件 q</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String q;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setQ</span><span class="params">(String q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.q = q;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>模糊查询 dao</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Region&gt; <span class="title">findListByQ</span><span class="params">(String q)</span> </span>&#123;</span><br><span class="line">    String hql = <span class="string">"FROM Region r WHERE r.shortcode LIKE ? OR r.citycode LIKE ? OR r.city LIKE ? OR r.province LIKE ? OR r.district LIKE ?"</span>;</span><br><span class="line">    List&lt;Region&gt; list = (List&lt;Region&gt;) <span class="keyword">this</span>.getHibernateTemplate().find(hql, <span class="string">"%"</span> + q + <span class="string">"%"</span>, <span class="string">"%"</span> + q + <span class="string">"%"</span>, <span class="string">"%"</span> + q + <span class="string">"%"</span>, <span class="string">"%"</span> + q + <span class="string">"%"</span>, <span class="string">"%"</span> + q + <span class="string">"%"</span>);</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="分区组合条件分页查询"><a href="#分区组合条件分页查询" class="headerlink" title="分区组合条件分页查询"></a>分区组合条件分页查询</h5><p>定义一个 json 转换方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个工具方法，用于将指定的表单 form 所有输入项转化为 json 数据</span></span><br><span class="line">    $.fn.serializeJson=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> serializeObj=&#123;&#125;;</span><br><span class="line">        <span class="keyword">var</span> array=<span class="keyword">this</span>.serializeArray();</span><br><span class="line">        $(array).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(serializeObj[<span class="keyword">this</span>.name])&#123;</span><br><span class="line">                <span class="keyword">if</span>($.isArray(serializeObj[<span class="keyword">this</span>.name]))&#123;</span><br><span class="line">                    serializeObj[<span class="keyword">this</span>.name].push(<span class="keyword">this</span>.value);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    serializeObj[<span class="keyword">this</span>.name]=[serializeObj[<span class="keyword">this</span>.name],<span class="keyword">this</span>.value];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                serializeObj[<span class="keyword">this</span>.name]=<span class="keyword">this</span>.value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> serializeObj;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>方法的调用,为查询窗口的查询按钮绑定事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#btn"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//调用工具方法，将其转换成 json 格式</span></span><br><span class="line">        <span class="keyword">var</span> json = $(<span class="string">"#searchForm"</span>).serializeJson();</span><br><span class="line"> <span class="comment">//调用数据表格的 load 方法，重新提交一次 ajax 请求，并提交参数</span></span><br><span class="line">  $(<span class="string">"#grid"</span>).datagrid(<span class="string">"load"</span>,json);</span><br><span class="line">  <span class="built_in">console</span>.info(json);</span><br><span class="line">  <span class="comment">// 关闭查询窗口</span></span><br><span class="line">   $(<span class="string">"#searchWindow"</span>).window(<span class="string">"close"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>分区组合条件分页查询 Action</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">pageQuery</span><span class="params">()</span></span>&#123;</span><br><span class="line">        DetachedCriteria dc = pageBean.getDetachedCriteria();</span><br><span class="line">        String addresskey = model.getAddresskey();</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isNotBlank(addresskey))&#123;</span><br><span class="line">            <span class="comment">//        动态添加过滤条件</span></span><br><span class="line">            dc.add(Restrictions.like(<span class="string">"addresskey"</span>,<span class="string">"%"</span>+addresskey+<span class="string">"%"</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Region region = model.getRegion();</span><br><span class="line">        <span class="keyword">if</span>(region !=<span class="keyword">null</span>)&#123;</span><br><span class="line">            String province = region.getProvince();</span><br><span class="line">            String city = region.getCity();</span><br><span class="line">            String district = region.getDistrict();</span><br><span class="line">            dc.createAlias(<span class="string">"region"</span>,<span class="string">"r"</span>);</span><br><span class="line">            <span class="comment">//根据 市、城、区 模糊查询</span></span><br><span class="line">            <span class="keyword">if</span>(StringUtils.isNotBlank(province))&#123;</span><br><span class="line"><span class="comment">//                参数一：分区对象中关联区域的属性对象名称</span></span><br><span class="line"><span class="comment">//                参数二：任意的一个别称</span></span><br><span class="line"><span class="comment">//                dc.createAlias("region","r");</span></span><br><span class="line">                dc.add(Restrictions.like(<span class="string">"r.province"</span>,<span class="string">"%"</span>+province+<span class="string">"%"</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(StringUtils.isNotBlank(city))&#123;</span><br><span class="line">                dc.add(Restrictions.like(<span class="string">"r.city"</span>,<span class="string">"%"</span>+city+<span class="string">"%"</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(StringUtils.isNotBlank(district))&#123;</span><br><span class="line">                dc.add(Restrictions.like(<span class="string">"r.district"</span>,<span class="string">"%"</span>+district+<span class="string">"%"</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        subareaService.pageQuery(pageBean);</span><br><span class="line">        <span class="keyword">this</span>.java2Json(pageBean,<span class="keyword">new</span> String[]&#123;<span class="string">"currentPage"</span>,<span class="string">"detachedCriteria"</span>,<span class="string">"pageSize"</span>,<span class="string">"decidedzone"</span>,<span class="string">"subareas"</span>&#125;);</span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>dao 需要增加语句</p>
<p>//指定 hibernate 封装对象的方式<br><code>detachedCriteria.setResultTransformer(DetachedCriteria.ROOT_ENTITY);</code></p>
<p>为了使查询两个表的结果封装到一个 Subarea 下带另一个表结构</p>
<p>Subarea[</p>
<p>{key:value},</p>
<p>{key:value}…</p>
<p>[{key:value},{key:value}]</p>
<p>]</p>
<p><img src="D:\hexo\source\_posts\bos\分区组合条件查询结构.png" alt="1550663597060"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通用查询分页方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageBean</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pageQuery</span><span class="params">(PageBean pageBean)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> currentPage = pageBean.getCurrentPage();</span><br><span class="line">        <span class="keyword">int</span> pageSize = pageBean.getPageSize();</span><br><span class="line">        DetachedCriteria detachedCriteria = pageBean.getDetachedCriteria();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询 pageBean 的 total （总记录数）</span></span><br><span class="line"><span class="comment">//        指定 hibernate 发出 sql 语句的形式，rowCount 会发出 count(*) 的 sql</span></span><br><span class="line">        detachedCriteria.setProjection(Projections.rowCount());</span><br><span class="line">        List&lt;Long&gt; countList = (List&lt;Long&gt;) <span class="keyword">this</span>.getHibernateTemplate().findByCriteria(detachedCriteria);</span><br><span class="line"><span class="comment">//        获得 list 集合的第一个数据，因为只有一个数据所以就是 记录数</span></span><br><span class="line">        Long count = countList.get(<span class="number">0</span>);</span><br><span class="line"><span class="comment">//        将总条数放入 pageBean</span></span><br><span class="line">        pageBean.setTotal(count.intValue());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询 rows（当前页需要展示的数据集合）</span></span><br><span class="line"><span class="comment">//        将 hibernate 发出 sql 语句的形式改回来，select * from xxx 的形式</span></span><br><span class="line">        detachedCriteria.setProjection(<span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//指定 hibernate 封装对象的方式</span></span><br><span class="line">        detachedCriteria.setResultTransformer(DetachedCriteria.ROOT_ENTITY);</span><br><span class="line">        <span class="keyword">int</span> firstResult = (currentPage-<span class="number">1</span>)*pageSize;</span><br><span class="line">        <span class="keyword">int</span> maxResults = pageSize;</span><br><span class="line">        List rows = <span class="keyword">this</span>.getHibernateTemplate().findByCriteria(detachedCriteria, firstResult, maxResults);</span><br><span class="line">        pageBean.setRows(rows);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="定区添加"><a href="#定区添加" class="headerlink" title="定区添加"></a>定区添加</h5><p>定区添加 jsp 页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;tr&gt;</span><br><span class="line">	&lt;td&gt;选择取派员&lt;/td&gt;</span><br><span class="line">	&lt;td&gt;</span><br><span class="line">		&lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"easyui-combobox"</span> name=<span class="string">"staff.id"</span></span><br><span class="line">					 data-options=<span class="string">"valueField:'id', textField:'name',</span></span><br><span class="line"><span class="string">						url:'staffAction_listajax.action'"</span>/&gt;</span><br><span class="line">	&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br></pre></td></tr></table></figure>
<p>action</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询所有未删除的取派员，返回 json</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">listajax</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    List&lt;Staff&gt; list = staffService.findListNotDelete();</span><br><span class="line">    <span class="keyword">this</span>.java2Json(list,<span class="keyword">new</span> String[]&#123;<span class="string">"decidedzones"</span>&#125;);</span><br><span class="line">    <span class="keyword">return</span> NONE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>service</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询所有未删除的取派员</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Staff&gt; <span class="title">findListNotDelete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    DetachedCriteria detachedCriteria = DetachedCriteria.forClass(Staff.class);</span><br><span class="line">    <span class="comment">//添加过滤条件，deltag = 0</span></span><br><span class="line">    detachedCriteria.add(Restrictions.eq(<span class="string">"deltag"</span>,<span class="string">"0"</span>));</span><br><span class="line">    <span class="keyword">return</span> staffDao.findByCriteria(detachedCriteria);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>dao</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">findByCriteria</span><span class="params">(DetachedCriteria detachedCriteria)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (List&lt;T&gt;) <span class="keyword">this</span>.getHibernateTemplate().findByCriteria(detachedCriteria);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>定区添加功能</p>
<p>如果提交有多个 id （输入框定区 id 与 field 分区 id），则将 data-options=”field:’id’” 改为 data-options=”field:’subareaid’”; 这样提交的分区 id 就为 subareaid 了，但是会因为后台数据转 json 没有该字段导致结果 json 中没有该数据，需要手动添加 bean 中获得该字段的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getSubareaid</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样 json 转换过程中就能加入该字段</p>
<p>action</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定区管理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@Scope</span>(<span class="string">"prototype"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecidedzoneAction</span> <span class="keyword">extends</span> <span class="title">BaseAction</span>&lt;<span class="title">Decidedzone</span>&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//属性驱动，接受多个分区 id</span></span><br><span class="line">    <span class="keyword">private</span> String[] subareaid;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSubareaid</span><span class="params">(String[] subareaid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.subareaid = subareaid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IDecidedzoneService decidedzoneService;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加定区</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line">        decidedzoneService.add(model,subareaid);</span><br><span class="line">        <span class="keyword">return</span> LIST;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>service</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecidedzoneServiceImpl</span> <span class="keyword">implements</span> <span class="title">IDecidedzoneService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IDecidedzoneDao decidedzoneDao;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ISubareaDao subareaDao;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Decidedzone model, String[] subareaid)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        添加定区</span></span><br><span class="line">        decidedzoneDao.save(model);</span><br><span class="line"><span class="comment">//        同时关联分区</span></span><br><span class="line">        <span class="keyword">for</span>(String id:subareaid)&#123;</span><br><span class="line">            <span class="comment">//hbm.xml 一的一方 decidedzone 放弃了维护，需要多的一方 subarea 来维护</span></span><br><span class="line">            Subarea subarea = subareaDao.findById(id);</span><br><span class="line"><span class="comment">//            model.getSubareas().add(subarea);//定区关联分区，但是一的一方放弃了维护，所以不合适</span></span><br><span class="line">            subarea.setDecidedzone(model);<span class="comment">//分区关联定区，维护外键</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>定区分页查询</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页查询</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">pageQuery</span><span class="params">()</span></span>&#123;</span><br><span class="line">        decidedzoneService.pageQuery(pageBean);</span><br><span class="line">        <span class="comment">//设置 立即加载关联的 一的一方的 staff(在 decidedzone.hbm.xml 的 staff many-to-one 中选择 lazy="false")</span></span><br><span class="line">        <span class="comment">//并且反过来关闭 加载的 staff 中的 decidedzones</span></span><br><span class="line">        <span class="keyword">this</span>.java2Json(pageBean,<span class="keyword">new</span> String[]&#123;<span class="string">"currentPage"</span>,<span class="string">"detachedCriteria"</span>,<span class="string">"pageSize"</span>,<span class="string">"subareas"</span>,<span class="string">"decidedzones"</span>&#125;);</span><br><span class="line"><span class="comment">//        this.java2Json(pageBean,new String[]&#123;"currentPage","detachedCriteria","pageSize","subareas"&#125;);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h5 id="分页查询死循环问题"><a href="#分页查询死循环问题" class="headerlink" title="分页查询死循环问题"></a>分页查询死循环问题</h5><p>页面不需要展示关联对象时：</p>
<ul>
<li>将关联对象属性排除</li>
</ul>
<p>页面需要展示关联对象时：</p>
<ul>
<li>将关联对象改为立即加载，并且将关联对象中的属性排除</li>
</ul>
<hr>
<h5 id="WebService-使用"><a href="#WebService-使用" class="headerlink" title="WebService 使用"></a>WebService 使用</h5><p>WebService 是两个系统之间的 远程调用技术，可以实现跨语言调用，因为调用的是 http 协议，传输数据格式为 xml，使用 post 方式接受用户请求</p>
<p>SOAP （Simple Object Access Protocol）简单对象访问协议</p>
<p>SOAP = 在 HTTP 基础上 加上 XML 数据</p>
<p>组成</p>
<p>\&lt;Encolope> - 必须以 XML 根元素出现</p>
<p>\&lt;Body> 必须在 body 部分包含必要执行的服务器方法，和发送到服务器的数据</p>
<p>WSDL （WebService Description Language）Web 服务描述语言</p>
<p>用于描述当前服务的一些信息（服务名称、服务的发布地址、服务提供的方法、方法的参数类型、方法的返回类型等）</p>
<p>基于 WebService 创建的服务</p>
<ul>
<li>创建一个 Java 项目</li>
<li>创建一个类，加入 WebService 注解</li>
<li>提供一个方法 </li>
<li>在 main 函数中调用 jdk 提供的发布服务方法</li>
<li>访问服务的 wdsl 文档，（服务的发布地址+wdsl）</li>
</ul>
<p>wsimport 是 jdk 自带的根据 wsdl 文档生成客户端调用代码的工具，无论什么语言的服务器端的 WebService 都会在客户端生成 java 代码</p>
<p>使用 wsimport 命令解析 wsdl 文件生成本地代码：wsimport -s . <a href="http://192.168.0.100/one?wsdl" target="_blank" rel="noopener">http://192.168.0.100/one?wsdl</a></p>
<p>-s 后有个 . 用于指定源码生成目录，. 指代当前目录</p>
<p>使用 -s 会在目录下生成两份代码，一份 class 一份 java，class 打包后可用，java 可以拷贝到自己的项目运行</p>
<p>通过本地代码创建一个代理对象</p>
<p>通过代理对象实现远程调用</p>
<hr>
<p>web 项目环境配置</p>
<p>第一步：创建动态web项目</p>
<p>第二步：导入CXF相关jar包</p>
<p>第三步：配置web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置让其寻找 cxf.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:cxf.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--项目启动时发布服务,默认找 web-inf /applicationcontext.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--配置 CXF 框架提供的 Servlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>cxf<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.apache.cxf.transport.servlet.CXFServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--通过初始化参数指定CXF框架的配置文件路径,已经在监听器中配置，项目启动时加载--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;init-param&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;param-name&gt;config-location&lt;/param-name&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;param-value&gt;classpath:cxf.xml&lt;/param-value&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;/init-param&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>cxf<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/service/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第四步：在类路径下（src 同路径）提供cxf.xml，并设置为 root Source</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:jaxws</span>=<span class="string">"http://cxf.apache.org/jaxws"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:soap</span>=<span class="string">"http://cxf.apache.org/bindings/soap"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">               http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">               http://cxf.apache.org/bindings/soap </span></span></span><br><span class="line"><span class="tag"><span class="string">               http://cxf.apache.org/schemas/configuration/soap.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">               http://cxf.apache.org/jaxws </span></span></span><br><span class="line"><span class="tag"><span class="string">               http://cxf.apache.org/schemas/jaxws.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 引入CXF Bean定义如下,早期的版本中使用 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:META-INF/cxf/cxf.xml"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:META-INF/cxf/cxf-extension-soap.xml"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:META-INF/cxf/cxf-servlet.xml"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--配置数据源--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql///crm_heima32"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--配置事务管理器--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--支持事务注解--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--注入模板--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"customerService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.crm.service.impl.CustomerServiceImpl"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">ref</span>=<span class="string">"jdbcTemplate"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!--注册服务--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">jaxws:server</span> <span class="attr">id</span>=<span class="string">"myService"</span> <span class="attr">address</span>=<span class="string">"/customer"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">jaxws:serviceBean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"customerService"</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">jaxws:serviceBean</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">jaxws:server</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第五步：针对t_customer表创建一个Customer客户实体类</p>
<p>第六步：开发一个接口和实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.crm.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.crm.domain.Customer;</span><br><span class="line"><span class="keyword">import</span> com.itheima.crm.service.ICustomerService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.RowMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerServiceImpl</span> <span class="keyword">implements</span> <span class="title">ICustomerService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.jdbcTemplate = jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Customer&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"select * from t_customer"</span>;</span><br><span class="line">        List&lt;Customer&gt; list = jdbcTemplate.query(sql, <span class="keyword">new</span> RowMapper&lt;Customer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Customer <span class="title">mapRow</span><span class="params">(ResultSet resultSet, <span class="keyword">int</span> i)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">                <span class="keyword">int</span> id = resultSet.getInt(<span class="string">"id"</span>);<span class="comment">//根据字段名从结果集获取对应的值</span></span><br><span class="line">                String name = resultSet.getString(<span class="string">"name"</span>);</span><br><span class="line">                String station = resultSet.getString(<span class="string">"station"</span>);</span><br><span class="line">                String telphone = resultSet.getString(<span class="string">"telphone"</span>);</span><br><span class="line">                String address = resultSet.getString(<span class="string">"address"</span>);</span><br><span class="line">                String decidedzone_id = resultSet.getString(<span class="string">"decidedzone_id"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Customer(id, name, station, telphone, address, decidedzone_id);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第七步：配置cxf.xml，见第四步</p>
<p>解析 wdsl 文件，生成客户端本地代码：（带 s 是有 java 跟  class 类，不带 s 的只有 class 类）</p>
<p>wsimport -s . <a href="http://192.168.171.1:8080/service/customer?wsdl" target="_blank" rel="noopener">http://192.168.171.1:8080/service/customer?wsdl</a></p>
<p>访问地址 </p>
<p><a href="http://192.168.171.1:8080/" target="_blank" rel="noopener">http://192.168.171.1:8080/</a>(url-pattern 中配置的路径名）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;cxf&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/service/*&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h4><h5 id="Q-idea-的-maven-项目部署后，无法显示-css-等样式"><a href="#Q-idea-的-maven-项目部署后，无法显示-css-等样式" class="headerlink" title="Q:idea 的 maven 项目部署后，无法显示 css 等样式"></a>Q:idea 的 maven 项目部署后，无法显示 css 等样式</h5><p>谷歌浏览器报错：easyui.css:1 Failed to load resource: the server responded with a status of 404 (Not Found）</p>
<p>提示各种 css 未找到</p>
<p>A:idea 应该会默认忽视 jsp 页面的 el 表达式，所以以下这种 绝对路径方式会失效</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> type=<span class="string">"text/css"</span> href=<span class="string">"$&#123;pageContext.request.contextPath&#125;/js/easyui/themes/default/easyui.css"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>需要在</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> isELIgnored=<span class="string">"false"</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>添加最后的 isELIgnored=”false” ，来使得不忽视 el 表达式</p>
<hr>
<h5 id="Q-点击-ztree-callback-中的-onClick-方法无反应"><a href="#Q-点击-ztree-callback-中的-onClick-方法无反应" class="headerlink" title="Q:点击 ztree callback 中的 onClick 方法无反应"></a>Q:点击 ztree callback 中的 onClick 方法无反应</h5><p>A:callback 应该是跟 date 同级的属性，如果将其放在 date 属性中则无效</p>
<hr>
<p>Q:idea 多模块 maven 项目给模块添加 hibernate 时出现报错</p>
<p>Module must not contain source root. The root already belongs to module</p>
<p><a href="https://www.jianshu.com/p/ed2733a59ad7" target="_blank" rel="noopener">idea 多模块项目报错</a></p>
<p>A:在 project Structure 中选择 module - Sources 选择父模块，将右侧的红色 content root 路径删除（一般是父模块拥有了 src、resources 等路径）</p>
<hr>
<h5 id="Q-hibernate-错误，网页报错-500"><a href="#Q-hibernate-错误，网页报错-500" class="headerlink" title="Q: hibernate 错误，网页报错 500"></a>Q: hibernate 错误，网页报错 500</h5><p>HTTP Status 500 - User is not mapped [FROM User u WHERE u.username=? AND u.password=?]; nested exception is org.hibernate.hql.internal.ast.QuerySyntaxException: User is not mapped [FROM User u WHERE u.username=? AND u.password=?]</p>
<p>nested exception is org.hibernate.hql.internal.ast.QuerySyntaxException: User is not mapped</p>
<p>A:配置 application.xml 中 hibernate 的映射文件注入错误</p>
<p>将如下配置的 / 写成了 . （com.itheima.bos.domain.*.xml）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mappingLocations"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:com/itheima/bos/domain/*.xml<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="https://www.cnblogs.com/zhangliang88/p/5476340.html" target="_blank" rel="noopener">ssh 整合报错</a></p>
<hr>
<p>Q:hibernate 报错</p>
<p> Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener<br>org.springframework.beans.factory.BeanCreationException: Error creating bean with name ‘sessionFactory’ defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Errors in named queries: user.editPassword</p>
<p>A: hbm.xml 中的 query 语句错误，语句最后加了一个 ；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">query</span> <span class="attr">name</span>=<span class="string">"user.editPassword"</span>&gt;</span></span><br><span class="line">    UPDATE User SET password = ? WHERE id = ?</span><br><span class="line"><span class="tag">&lt;/<span class="name">query</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="Q-sturts2-model-提交乱码问题"><a href="#Q-sturts2-model-提交乱码问题" class="headerlink" title="Q:sturts2 model 提交乱码问题"></a>Q:sturts2 model 提交乱码问题</h5><p>A:form 表单的 method 没有写 post 方法，导致 get 提交了</p>
<hr>
<h5 id="Q-500-错误"><a href="#Q-500-错误" class="headerlink" title="Q: 500 错误"></a>Q: 500 错误</h5><p>HTTP Status 500 - not-null property references a null or transient value : com.itheima.bos.domain.Staff.haspda; nested exception is org.hibernate.PropertyValueException: not-null property references a null or transient value : com.itheima.bos.domain.Staff.haspda</p>
<p>A:</p>
<p>hibernate 映射文件中（hbm.xml）的字段属性生成时为 not null=“true”，将其改为 false</p>
<hr>
<h5 id="Q-java-lang-NoSuchMethodException"><a href="#Q-java-lang-NoSuchMethodException" class="headerlink" title="Q:java.lang.NoSuchMethodException"></a>Q:java.lang.NoSuchMethodException</h5><p>java.lang.NoSuchMethodException: com.itheima.bos.web.action.StaffAction.deleteBatch()</p>
<p>A: 修改了 hbm.xml 文件，没有重启，修改 xml 后无法热部署，而且修改了 hbm.xml 中的 hql 语句错误</p>
<hr>
<h5 id="Q-hibernate-报错"><a href="#Q-hibernate-报错" class="headerlink" title="Q:hibernate 报错"></a>Q:hibernate 报错</h5><p>严重: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener<br>org.springframework.beans.factory.BeanCreationException: Error creating bean with name ‘sessionFactory’ defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Errors in named queries: staff.delete<br>Caused by: org.hibernate.HibernateException: Errors in named queries: staff.delete<br>    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:493)<br>    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:444)<br>    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:708)<br>    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)<br>    at org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:416)<br>    at org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:401)<br>    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1637)<br>    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1574)<br>    … 22 more</init></p>
<p>A:HQL 语句 “1” 用了双引号会报错，改为单引号 ‘1’</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;query name=&quot;staff.delete&quot;&gt;</span><br><span class="line">    UPDATE Staff SET deltag=&quot;1&quot; WHERE id=?</span><br><span class="line">&lt;/query&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="Q-前台传递了参数但是无法修改数据库"><a href="#Q-前台传递了参数但是无法修改数据库" class="headerlink" title="Q:前台传递了参数但是无法修改数据库"></a>Q:前台传递了参数但是无法修改数据库</h5><p>A:struts2 属性驱动没有加 get ，set 方法，导致取到 id 为空</p>
<hr>
<h5 id="Q-InstantiationException-无法实例化-bean"><a href="#Q-InstantiationException-无法实例化-bean" class="headerlink" title="Q:InstantiationException 无法实例化 bean"></a>Q:InstantiationException 无法实例化 bean</h5><p>java.lang.InstantiationException: com.itheima.bos.domain.Region<br>    at java.lang.Class.newInstance(Class.java:427)<br>    at com.itheima.bos.web.action.base.BaseAction.<init>(BaseAction.java:32)<br>    at com.itheima.bos.web.action.RegionAction.<init>(RegionAction.java:23)<br>    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)</init></init></p>
<p>​    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)<br>​    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)<br>​    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)<br>​    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)</p>
<p>A:无法实例化 InstantiationException 错误，用反射类实例化某个对象时，如果内部只有有参构造函数那么会无法实例化（没有有参构造函数时会有默认隐藏的无参构造方法），那么只要手动添加一个无参构造方法就行了</p>
<p><a href="https://hellsing42.iteye.com/blog/137202" target="_blank" rel="noopener">关于InstantiationException错误的原因</a></p>
<hr>
<h5 id="Q-从-excel-表保存取派员数组方法执行，没有报错，但是也没有写进数据库"><a href="#Q-从-excel-表保存取派员数组方法执行，没有报错，但是也没有写进数据库" class="headerlink" title="Q: 从 excel 表保存取派员数组方法执行，没有报错，但是也没有写进数据库"></a>Q: 从 excel 表保存取派员数组方法执行，没有报错，但是也没有写进数据库</h5><p>堆栈跟踪 发现如下问题：</p>
<p>InvocationTargetException</p>
<p>InvocationTargetException是因为反射调用的方法和构造器中出现的异常导致，</p>
<p>继续跟踪发现：</p>
<p>turn off your session into flushMode.commit auto or remove ‘readOnly’ marker for transcation defintion</p>
<p>发现应该是事务提交设置了 readOnly 或者 自动提交，于是查看自己的 serviceImpl 发现注释上只写了 @Service 没有 @Transcational，忘记写事务注释了… 因为是 List\&lt;Region> 多个 Region 的保存操作，需要添加事务。</p>
<hr>
<h5 id="Q-sturts2-服务端-action-返回-NONE，页面为空白无法显示-json-回显数据"><a href="#Q-sturts2-服务端-action-返回-NONE，页面为空白无法显示-json-回显数据" class="headerlink" title="Q: sturts2 服务端 action 返回 NONE，页面为空白无法显示 json 回显数据"></a>Q: sturts2 服务端 action 返回 NONE，页面为空白无法显示 json 回显数据</h5><p>A: 页面响应 HTTP Status 404 - result ‘null’ not found    The requested resource is not available.</p>
<p>堆栈跟踪发现 return NONE 抛出 IOException， 但是另一个相同的 action return NONE 确可以正确返回 json 数组。</p>
<p>因为在 struts.xml 中配置了 \&lt;result name=”none”/> 导致拦截器拦截，然后重定向到一个不存在的页面，导致异常。</p>
<p>return NONE 代表 Action 正确执行，但并不返回任何视图。然后 struts.xml 的 result 的默认配置是 dispatcher，调用 RequestDispatcher，转发页面</p>
<p><a href="https://blog.csdn.net/tian330726/article/details/50678614" target="_blank" rel="noopener">result 的 name 和 type 属性</a></p>
<h5 id="Q-json-转换错误（对象互相引用错误）"><a href="#Q-json-转换错误（对象互相引用错误）" class="headerlink" title="Q: json 转换错误（对象互相引用错误）"></a>Q: json 转换错误（对象互相引用错误）</h5><p>DEBUG DefaultDispatcherErrorHandler:84 - Exception occurred during processing request: There is a cycle in the hierarchy!<br>net.sf.json.JSONException: There is a cycle in the hierarchy!<br>    at net.sf.json.util.CycleDetectionStrategy$StrictCycleDetectionStrategy.handleRepeatedReferenceAsObject(CycleDetectionStrategy.java:97)</p>
<p>A: 一个对象 A 中引用了另一个的集合对象 B，B 中又含有对 A 的引用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.java2Json(pageBean,<span class="keyword">new</span> String[]&#123;<span class="string">"currentPage"</span>,<span class="string">"detachedCriteria"</span>,<span class="string">"pageSize"</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>json 转换时忽略其循环引用的字段</p>
<p>如果循环嵌套的字段是需要在需要展示的字段，那么就需要将该对象的 hbm.xml 中的展示字段属性,懒加载关闭 lazy = ‘false’</p>
<hr>
<h5 id="Q：java-lang-Integer-cannot-be-cast-to-java-lang-String"><a href="#Q：java-lang-Integer-cannot-be-cast-to-java-lang-String" class="headerlink" title="Q：java.lang.Integer cannot be cast to java.lang.String"></a>Q：java.lang.Integer cannot be cast to java.lang.String</h5><p>A: Restrictions.eq(“xxx”,0);</p>
<p>查询语句出错，0 应该改为 “0” 字符串</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"># java</a>
          
            <a href="/tags/web/" rel="tag"># web</a>
          
            <a href="/tags/ssh/" rel="tag"># ssh</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/01/30/ssh-crm/" rel="next" title="ssh_crm">
                <i class="fa fa-chevron-left"></i> ssh_crm
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/02/21/BOS-later/" rel="prev" title="BOS_later">
                BOS_later <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Inhaltsverzeichnis
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Übersicht
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">crowsong</p>
              <div class="site-description motion-element" itemprop="description">日々私たちが过ごしている日常は、実は、奇迹の连続なのかもしれない</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">30</span>
                    <span class="site-state-item-name">Artikel</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">Kategorien</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">39</span>
                    <span class="site-state-item-name">schlagwörter</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#主流软件系统管理："><span class="nav-number">1.</span> <span class="nav-text">主流软件系统管理：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Maven-项目环境"><span class="nav-number">2.</span> <span class="nav-text">Maven 项目环境</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#easyui"><span class="nav-number">3.</span> <span class="nav-text">easyui</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jquery-动态添加-tabs"><span class="nav-number">4.</span> <span class="nav-text">jquery 动态添加 tabs</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Ztree-的使用"><span class="nav-number">5.</span> <span class="nav-text">Ztree 的使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#idea-下反向工程生成-entity-及其-hbm-xml"><span class="nav-number">6.</span> <span class="nav-text">idea 下反向工程生成 entity 及其 hbm.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#代码抽取"><span class="nav-number">7.</span> <span class="nav-text">代码抽取</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#easyUI-的一些方法"><span class="nav-number">8.</span> <span class="nav-text">easyUI 的一些方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设置拦截器将未登录用户跳转到登录页面"><span class="nav-number">9.</span> <span class="nav-text">设置拦截器将未登录用户跳转到登录页面</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#idea-hibernate-映射关系配置"><span class="nav-number">10.</span> <span class="nav-text">idea hibernate 映射关系配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#添加手机号码校验"><span class="nav-number">11.</span> <span class="nav-text">添加手机号码校验</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#easyui-datagrid-创建"><span class="nav-number">12.</span> <span class="nav-text">easyui-datagrid 创建</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#派件员批量删除按钮添加事件"><span class="nav-number">13.</span> <span class="nav-text">派件员批量删除按钮添加事件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#文件上传页面不刷新（伪）"><span class="nav-number">14.</span> <span class="nav-text">文件上传页面不刷新（伪）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ocupload-的-upload-方法实现文件上传不刷新"><span class="nav-number">15.</span> <span class="nav-text">ocupload 的 upload 方法实现文件上传不刷新</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#区域导入"><span class="nav-number">16.</span> <span class="nav-text">区域导入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分页类的重构抽取"><span class="nav-number">17.</span> <span class="nav-text">分页类的重构抽取</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分区添加功能"><span class="nav-number">18.</span> <span class="nav-text">分区添加功能</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分区组合条件分页查询"><span class="nav-number">19.</span> <span class="nav-text">分区组合条件分页查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#定区添加"><span class="nav-number">20.</span> <span class="nav-text">定区添加</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分页查询死循环问题"><span class="nav-number">21.</span> <span class="nav-text">分页查询死循环问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#WebService-使用"><span class="nav-number">22.</span> <span class="nav-text">WebService 使用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Q-amp-A"><span class="nav-number"></span> <span class="nav-text">Q&amp;A</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-idea-的-maven-项目部署后，无法显示-css-等样式"><span class="nav-number">1.</span> <span class="nav-text">Q:idea 的 maven 项目部署后，无法显示 css 等样式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-点击-ztree-callback-中的-onClick-方法无反应"><span class="nav-number">2.</span> <span class="nav-text">Q:点击 ztree callback 中的 onClick 方法无反应</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-hibernate-错误，网页报错-500"><span class="nav-number">3.</span> <span class="nav-text">Q: hibernate 错误，网页报错 500</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-sturts2-model-提交乱码问题"><span class="nav-number">4.</span> <span class="nav-text">Q:sturts2 model 提交乱码问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-500-错误"><span class="nav-number">5.</span> <span class="nav-text">Q: 500 错误</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-java-lang-NoSuchMethodException"><span class="nav-number">6.</span> <span class="nav-text">Q:java.lang.NoSuchMethodException</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-hibernate-报错"><span class="nav-number">7.</span> <span class="nav-text">Q:hibernate 报错</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-前台传递了参数但是无法修改数据库"><span class="nav-number">8.</span> <span class="nav-text">Q:前台传递了参数但是无法修改数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-InstantiationException-无法实例化-bean"><span class="nav-number">9.</span> <span class="nav-text">Q:InstantiationException 无法实例化 bean</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-从-excel-表保存取派员数组方法执行，没有报错，但是也没有写进数据库"><span class="nav-number">10.</span> <span class="nav-text">Q: 从 excel 表保存取派员数组方法执行，没有报错，但是也没有写进数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-sturts2-服务端-action-返回-NONE，页面为空白无法显示-json-回显数据"><span class="nav-number">11.</span> <span class="nav-text">Q: sturts2 服务端 action 返回 NONE，页面为空白无法显示 json 回显数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q-json-转换错误（对象互相引用错误）"><span class="nav-number">12.</span> <span class="nav-text">Q: json 转换错误（对象互相引用错误）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Q：java-lang-Integer-cannot-be-cast-to-java-lang-String"><span class="nav-number">13.</span> <span class="nav-text">Q：java.lang.Integer cannot be cast to java.lang.String</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">crowsong</span>

  

  
</div>


  <div class="powered-by">Erstellt mit  <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Design – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.2.0"></script>



  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  


  <script src="/js/next-boot.js?v=7.2.0"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":120,"height":240},"mobile":{"show":false},"log":false});</script></body>
</html>
